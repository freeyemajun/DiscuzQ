_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[77],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=i,t.useAmp=function(){return i(o.default.useContext(a.AmpStateContext))};var r,o=(r=n("q1tI"))&&r.__esModule?r:{default:r},a=n("lwAK");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,o=void 0!==r&&r,a=e.hasQuery,i=void 0!==a&&a;return n||o&&i}},"/Nde":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return v}));var r=n("lSNA"),o=n.n(r),a=(n("o0o1"),n("ls82"),n("yXPU"),n("+3IH")),i=n("dJ22");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={Code:"common_0001",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0"},l={Code:"common_0002",Message:"\u9700\u8981\u8865\u5145\u9644\u52a0\u4fe1\u606f"},d={Code:"common_0003",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0\u548c\u9644\u52a0\u4fe1\u606f"},f=-4009,p=2,h=-4007,v=function(e){var t=e.webConfig.setSite;return"1"===(t=void 0===t?{}:t).openExtFields},b=function(e){if(function(e){var t=Object(a.a)(e,"data.isMissNickname",!1),n=10===Object(a.a)(e,"data.userStatus"),r=Object(a.a)(e,"data.accessToken","");if(-8e3!==e.code){var o=Object(a.a)(e,"data.uid","");if(Object(i.a)({accessToken:r}),n&&t)throw s({uid:o},d);if(t)throw s({uid:o},u);if(n)throw s({uid:o},l)}}(e),0===e.code||e.code===f||e.code===h){var t=e.code,n=Object(a.a)(e,"data.userStatus",0),r=Object(a.a)(e,"data.uid","");if(0===t&&n===p){var o=Object(a.a)(e,"data.accessToken","");Object(i.a)({accessToken:o}),t=n}if(t)throw{Code:t,Message:Object(a.a)(e,"data.rejectReason","")||Object(a.a)(e,"data.banReason",""),uid:r}}}},"4xcg":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("ma9I");var r,o=n("nKUr"),a=n("lwsE"),i=n.n(a),c=n("W8MJ"),s=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),f=n.n(d),p=n("Nsbk"),h=n.n(p),v=n("q1tI"),b=n.n(v),m=n("yuBF"),g=n("+3IH"),j=n("g4pe"),y=n.n(j),O=(n("yXV3"),n("rB9j"),function(e,t,n,r){var o=w(e+t),a=[],i=[];if(n||!k(o,a)){n&&document.getElementById(o)&&document.getElementById(o).parentNode.removeChild(document.getElementById(o)),a.push(o);var c=document.createElement("script");c.type="text/javascript",c.id=o;try{e?(c.src=e,c.onloadDone=!1,c.onload=function(){c.onloadDone=!0,i[e]=1},c.onreadystatechange=function(){"loaded"!==c.readyState&&"complete"!==c.readyState||c.onloadDone||(c.onloadDone=!0,i[e]=1)}):t&&(c.text=t),document.getElementsByTagName("head")[0].appendChild(c)}catch(s){console.log(s)}}}),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=0,r=0,o="",a="";for(a=t-e.length%t,r=0;r<a;r+=1)e+="0";for(;n<e.length;)o=x(o,e.substr(n,t)),n+=t;return o},x=function(e,t){for(var n="",r=Math.max(e.length,t.length),o=0;o<r;o++){var a=e.charCodeAt(o)^t.charCodeAt(o);n+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a%52)}return n},k=function(e,t){if("string"===typeof e||"number"===typeof e)for(var n in t)if(t[n]===e)return!0;return!1};function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var C=Object(m.inject)("site")(r=Object(m.observer)(r=function(e){l()(n,e);var t=P(n);function n(e){return i()(this,n),t.call(this,e)}return s()(n,[{key:"componentDidMount",value:function(){var e,t,n;!function(e){if(-1===e.indexOf("<script"))return e;for(var t=/<script[^\>]*?>([^\x00]*?)<\/script>/gi,n=[];n=t.exec(e);){var r=/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/i,o=[];(o=r.exec(n[0]))?O(o[1],"",o[2],o[3]):(o=(r=/<script(.*?)>([^\x00]+?)<\/script>/i).exec(n[0]),O("",o[2],-1!==o[1].indexOf("reload=")))}}((null===(e=this.props.site)||void 0===e||null===(t=e.webConfig)||void 0===t||null===(n=t.setSite)||void 0===n?void 0:n.siteStat)||"")}},{key:"formatTitle",value:function(){var e=this.props,t=e.site,n=e.title,r=e.showSiteName,o=void 0===r||r?Object(g.a)(t,"webConfig.setSite.siteName","\u6b22\u8fce\u60a8"):"";return n&&""!==n&&(o=""===o?"".concat(n):"".concat(n," - ").concat(o)),o}},{key:"formatKeywords",value:function(){var e=this.props,t=e.site,n=e.keywords,r=Object(g.a)(t,"webConfig.setSite.siteKeywords","\u6b22\u8fce\u60a8");return n&&""!==n&&(r="".concat(n," - ").concat(r)),r}},{key:"formatDescription",value:function(){var e=this.props,t=e.site,n=e.description,r=Object(g.a)(t,"webConfig.setSite.siteIntroduction","\u6b22\u8fce\u60a8");return n&&""!==n&&(r=n),r}},{key:"render",value:function(){var e,t,n,r=(null===(e=this.props.site)||void 0===e||null===(t=e.webConfig)||void 0===t||null===(n=t.setSite)||void 0===n?void 0:n.siteFavicon)||"";return Object(o.jsxs)(y.a,{children:[Object(o.jsx)("meta",{name:"keywords",content:this.formatKeywords()}),Object(o.jsx)("meta",{name:"description",content:this.formatDescription()}),r&&Object(o.jsx)("link",{rel:"icon",href:r}),Object(o.jsx)("title",{children:this.formatTitle()})]})}}]),n}(b.a.Component))||r)||r;t.a=C},"5BGO":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("qePV"),n("i6QF"),n("kSko"),n("toAj");var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Number(e);return Number.isNaN(e)&&(t=0),t<1e4?t:(Number.isInteger(e),"".concat((e/1e4).toFixed(1),"W"))}},"5f2u":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("lSNA")),a=r(n("lwsE")),i=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("q1tI")),d=n("GDuN"),f=n("Cehy"),p=n("ggaN"),h=r(n("KxVQ"));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,c.default)(n,e);var t=b(n);function n(e){var r;return(0,a.default)(this,n),r=t.call(this,e),(0,h.default)({componentName:"button"}),r}return(0,i.default)(n,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props),t=this.RenderComponent;return l.default.createElement(t,e,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.ButtonViewAdapter,logicalAdapter:p.ButtonLogicalAdapter}));t.default=m},"63fP":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/wx-authorization",function(){return n("WweE")}])},"6x0u":function(e,t,n){"use strict";var r=n("xDBR"),o=n("2oRo"),a=n("0Dky");e.exports=r||!a((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}))},"8Kt/":function(e,t,n){"use strict";n("lSNA");t.__esModule=!0,t.defaultHead=l,t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=(r=n("Xuae"))&&r.__esModule?r:{default:r},i=n("lwAK"),c=n("FYa8"),s=n("/0+H");function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function d(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var f=["name","httpEquiv","charSet","itemProp"];function p(e,t){return e.reduce((function(e,t){var n=o.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(d,[]).reverse().concat(l(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(o){var a=!0,i=!1;if(o.key&&"number"!==typeof o.key&&o.key.indexOf("$")>0){i=!0;var c=o.key.slice(o.key.indexOf("$")+1);e.has(c)?a=!1:e.add(c)}switch(o.type){case"title":case"base":t.has(o.type)?a=!1:t.add(o.type);break;case"meta":for(var s=0,u=f.length;s<u;s++){var l=f[s];if(o.props.hasOwnProperty(l))if("charSet"===l)n.has(l)?a=!1:n.add(l);else{var d=o.props[l],p=r[l]||new Set;"name"===l&&i||!p.has(d)?(p.add(d),r[l]=p):a=!1}}}return a}}()).reverse().map((function(e,t){var n=e.key||t;return o.default.cloneElement(e,{key:n})}))}function h(e){var t=e.children,n=(0,o.useContext)(i.AmpStateContext),r=(0,o.useContext)(c.HeadManagerContext);return o.default.createElement(a.default,{reduceComponentsToState:p,headManager:r,inAmpMode:(0,s.isInAmpMode)(n)},t)}h.rewind=function(){};var v=h;t.default=v},"9rcn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("kEK2").PopupWebLayout}});t.PopupViewAdapter=r},ALHM:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("ma9I"),n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var r=n("o0o1"),o=n.n(r),a=n("RIqP"),i=n.n(a),c=n("lSNA"),s=n.n(c),u=(n("ls82"),n("yXPU")),l=n.n(u),d=n("rGXy"),f=n("lY1M");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=["closeWindow","chooseImage","uploadImage","getLocalImgData","updateAppMessageShareData","updateTimelineShareData","getNetworkType"],b=!1;function m(){return g.apply(this,arguments)}function g(){return(g=l()(o.a.mark((function e(){var t,n,r,a,c,s,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],n=u.length>1&&void 0!==u[1]?u[1]:[],f.b.env("weixin")){e.next=4;break}return e.abrupt("return");case 4:return r=[],window.wx&&wx.config||(a=new Promise((function(e){var t=document.createElement("script");t.src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js",t.onload=function(){return e()},document.body.appendChild(t)})),r.push(a)),e.next=8,Promise.all(r);case 8:if(t&&!b){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(d.getWXConfig)({params:{url:encodeURIComponent(window.location.href)}});case 12:if(0!==(c=e.sent).code||!c.data||!c.data.appId){e.next=21;break}return o=c.data,s={appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature},wx&&wx.config(h(h({debug:!1},s),{},{jsApiList:[].concat(v,i()(n))})),wx&&(wx.hasDoneConfig=!0),b=!0,e.abrupt("return",!0);case 21:console.error("\u521d\u59cb\u5316\u5fae\u4fe1jssdk\u5931\u8d25\uff01",c);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}var o}),e)})))).apply(this,arguments)}},C6Q5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWebAdapter=void 0;t.PopupWebAdapter={}},Cehy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonViewAdapter=void 0;var r=(0,n("1d9p").baseLayoutFactory)({layoutImplement:function(){return n("zLVW").ButtonWebLayout}});t.ButtonViewAdapter=r},E2vk:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("ma9I");var r=n("lN2P"),o=n("KBHl"),a="/thread/post",i="/indexPages/thread/post/index";function c(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e.isLogin())return r.a.saveAndLogin(),!1;if(!t.publishNeedBindPhone&&!t.publishNeedBindWechat)return!0;var s="bind".concat(t.publishNeedBindPhone&&!e.mobile?"Mobile":"").concat(t.publishNeedBindWechat&&!e.isBindWechat?"Wechat":""),u="".concat(t.isSmsOpen?"mobile":"").concat("none"!==t.wechatEnv?"wechat":""),l="",d="",f={limitPublishType:n};if("h5"===t.platform){switch(n){case"comment":if("miniProgram"===t.wechatEnv){d="".concat(window.location.origin).concat(i);break}d="".concat(window.location.origin).concat(a);break;case"reply":if("miniProgram"===t.wechatEnv){d="/indexPages/thread/index?id=".concat(c);break}r.a.saveCurrentUrl(),d=r.a.getUrl()}(d=encodeURIComponent(d))&&(f.toPage=d)}switch(u){case"mobile":l=e.mobile?"":Object(o.a)("/user/bind-phone",f);break;case"wechat":l=e.isBindWechat?"":Object(o.a)("/user/wx-bind-qrcode",f);break;case"mobilewechat":switch(s){case"bindMobile":l=e.mobile?"":Object(o.a)("/user/bind-phone",f);break;case"bindWechat":l=e.isBindWechat?"":Object(o.a)("/user/wx-bind-qrcode",f);break;case"bindMobileWechat":f.bindPhone=1,l=e.isBindWechat||e.mobile?"":Object(o.a)("/user/wx-bind-qrcode",f)}}return l&&r.a.saveAndPush(l),"comment"===n&&r.a.setUrl("".concat(window.location.origin).concat(a)),!l}},EUja:function(e,t,n){"use strict";var r=n("ppGB"),o=n("HYAF");e.exports="".repeat||function(e){var t=String(o(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},Ep9I:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},Eqjn:function(e,t,n){"use strict";var r=n("I+eb"),o=n("g6v/"),a=n("6x0u"),i=n("ewvW"),c=n("HAuM"),s=n("m/L8");o&&r({target:"Object",proto:!0,forced:a},{__defineGetter__:function(e,t){s.f(i(this),e,{get:c(t),enumerable:!0,configurable:!0})}})},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.HeadManagerContext=o},FeKq:function(e,t,n){"use strict";n("ma9I");var r=n("nKUr"),o=n("q1tI"),a=n.n(o),i="_3YBtZIosMIaNUIH7hgCvrT",c="LbRnmFhs4VGT-iZI8HW0U",s="kJvn2RCOLIxlcPmRoH87c",u="_3y6QrH_gLVfpP_aZ7QC5fx",l="_1ywliL_ORaxE1O4BZd2tIJ",d="_1Or4pww5i7vvwqB7dh7wco",f="_2lR6CrDbTG1wN0CQv1Yct0",p="_3g2g6Prdme4Gz3vZATyxht",h="_3O4lKKTcX71GUjUmcFZjw-",v="NRBAkMOs0xY_ANFBX_AIH",b=n("MCNy"),m=n.n(b),g=n("TSYQ"),j=n.n(g),y=n("k8W2"),O=n.n(y),w=n("RiVy"),x=function(e){var t=e.onClose,n=e.handleWxShare,o=e.handleH5Share,a=e.site,b=e.user,g=e.handleExperience,y=e.show,x=e.createCard,k=e.fromThread;return Object(r.jsx)(O.a,{position:"bottom",visible:y,onClose:t,children:Object(r.jsxs)("div",{className:v,children:[Object(r.jsx)("div",{className:i,children:Object(r.jsxs)("div",{className:j()(u,c),children:[Object(r.jsxs)("div",{className:s,onClick:x,children:[Object(r.jsx)("div",{className:l,children:Object(r.jsx)(m.a,{name:"PictureOutlinedBig",size:20})}),Object(r.jsx)("span",{className:f,children:"\u751f\u6210\u6d77\u62a5"})]}),Object(r.jsxs)("div",{className:s,onClick:o,children:[Object(r.jsx)("div",{className:l,children:Object(r.jsx)(m.a,{name:"PaperClipOutlined",size:20})}),Object(r.jsx)("span",{className:f,children:"\u590d\u5236\u94fe\u63a5"})]}),Object(w.a)()&&!k&&Object(r.jsxs)("div",{className:s,onClick:n,children:[Object(r.jsx)("div",{className:l,children:Object(r.jsx)(m.a,{name:"WeChatOutlined",size:20})}),Object(r.jsx)("span",{className:f,children:"\u5fae\u4fe1\u5206\u4eab"})]}),"none"!==(null===a||void 0===a?void 0:a.wechatEnv)&&(null===b||void 0===b?void 0:b.isAdmini)&&Object(r.jsxs)("div",{className:s,onClick:g,children:[Object(r.jsx)("div",{className:"".concat(l," ").concat(d),children:Object(r.jsx)(m.a,{name:"ExperienceOutlined",size:20})}),Object(r.jsx)("span",{className:f,children:"\u9650\u65f6\u4f53\u9a8c\u5361"})]})]})}),Object(r.jsx)("div",{className:p,children:Object(r.jsx)("span",{className:h,onClick:t,children:"\u53d6\u6d88"})})]})})};t.a=a.a.memo(x)},FtgW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={SUPPLEMENTARY:10}},HZIX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("C6Q5").PopupWebAdapter}});t.PopupLogicalAdapter=r},IvHc:function(e,t,n){"use strict";var r=n("lN2P");t.a=r.a.saveAndLogin},J0pL:function(e,t,n){"use strict";n("pNMO"),n("4Brf");var r,o=n("nKUr"),a=n("lwsE"),i=n.n(a),c=n("W8MJ"),s=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),f=n.n(d),p=n("Nsbk"),h=n.n(p),v=n("q1tI"),b=n.n(v),m=n("yuBF"),g=n("4xcg");function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var y=Object(m.inject)("site")(r=Object(m.inject)("search")(r=Object(m.observer)(r=function(e){l()(n,e);var t=j(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"renderView",value:function(){var e=this.props,t=e.pc,n=e.h5,r=e.title,a=void 0===r?"":r,i=e.keywords,c=void 0===i?"":i,s=e.description,u=void 0===s?"":s,l=e.showSiteName,d=void 0===l||l,f="pc"===this.props.site.platform?t||null:n||null;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(g.a,{title:a,keywords:c,description:u,showSiteName:d}),f]})}},{key:"render",value:function(){return this.renderView()}}]),n}(b.a.Component))||r)||r)||r;t.a=y},JTJg:function(e,t,n){"use strict";var r=n("I+eb"),o=n("WjRb"),a=n("HYAF");r({target:"String",proto:!0,forced:!n("qxPZ")("includes")},{includes:function(e){return!!~String(a(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},KBHl:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("ma9I"),n("QWBl"),n("yq1k"),n("tkto"),n("JTJg"),n("FZtP");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.includes("?"),r=e;try{return Object.keys(t).forEach((function(e,o){t[e]&&(r+="".concat(n||0!==o?"&":"?").concat(e,"=").concat(t[e]))})),r}catch(o){return""}}},KvOD:function(e,t,n){},L85e:function(e,t,n){"use strict";var r,o=n("nKUr"),a=n("o0o1"),i=n.n(a),c=(n("ls82"),n("yXPU")),s=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),f=n.n(d),p=n("7W2i"),h=n.n(p),v=n("a1gu"),b=n.n(v),m=n("Nsbk"),g=n.n(m),j=n("q1tI"),y=n.n(j),O=n("yuBF"),w=n("20a2"),x="_1MEZy-bXugAGKzEzN6uLBG",k="_1SqGpIHOHJ0tAUKX85CF2M",P="_2T4TVSvupPMfLA3Xunk_rs",C="_11Z_R6CIdOg1HX9c9au-is",S="_3ghguMz-4SoEw1IO415lwX",N=n("M2Pz"),I=n("5f2u"),_=n.n(I),E=n("wdT/"),M=n.n(E),D=n("sho3"),R=n("dJ22"),A=n("+3IH"),B=n("/Nde");function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b()(this,n)}}var W=!1,L=Object(O.inject)("site")(r=Object(O.inject)("user")(r=Object(O.inject)("h5QrCode")(r=Object(O.inject)("commonLogin")(r=Object(O.inject)("invite")(r=Object(O.observer)(r=function(e){h()(n,e);var t=T(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).authorization=s()(i.a.mark((function e(){var t,n,o,a,c,s,u,l,d,f,p,h,v,b,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.router,o=t.invite,a=n.query,c=a.code,s=a.sessionId,u=a.sessionToken,l=a.state,d=a.type,e.prev=2,!W){e.next=5;break}return e.abrupt("return");case 5:return W=!0,e.next=8,Object(D.h5WechatCodeLogin)({timeout:1e4,params:{code:c,sessionId:s,sessionToken:u,state:l,inviteCode:o.getInviteCode(n)}});case 8:if(f=e.sent,W=!1,-7016!==f.code){e.next=14;break}return p=f.data,h=p.sessionToken,v=p.nickname,n.push({pathname:"wx-select",query:{sessionToken:h,nickname:v}}),e.abrupt("return");case 14:if(0!==f.code||"h5"!==d){e.next=21;break}return b=Object(A.a)(f,"data.accessToken"),m=Object(A.a)(f,"data.uid"),Object(R.a)({accessToken:b}),r.props.user.updateUserInfo(m),window.location.href="/",e.abrupt("return");case 21:if(0!==f.code){e.next=25;break}return r.setState({loginTitle:"\u5df2\u6210\u529f\u767b\u5f55"}),r.props.h5QrCode.isBtn=!1,e.abrupt("return");case 25:throw Object(B.d)(f),{Code:f.code,Message:f.msg};case 29:throw e.prev=29,e.t0=e.catch(2),W=!1,r.setState({loginTitle:"\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u4e8c\u7ef4\u7801\u91cd\u65b0\u626b\u7801"}),r.props.h5QrCode.isBtn=!1,M.a.error({content:e.t0.Message}),{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 36:case"end":return e.stop()}}),e,null,[[2,29]])}))),r.state={loginTitle:"\u4f60\u786e\u5b9a\u8981\u6388\u6743\u767b\u5f55".concat(e.site.siteName,"\u5417\uff1f")},r}return f()(n,[{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{className:x,children:[Object(o.jsx)(N.a,{hideInfo:!0,mode:"login"}),Object(o.jsxs)("div",{className:C,children:[Object(o.jsx)("div",{className:S,children:this.state.loginTitle}),this.props.h5QrCode.isBtn?Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(_.a,{className:k,type:"primary",onClick:this.authorization,children:"\u786e\u5b9a"})}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)(_.a,{className:P,onClick:function(){e.setState({loginTitle:"\u5df2\u53d6\u6d88\u767b\u5f55"}),e.props.h5QrCode.isBtn=!1,window.wx&&window.wx.ready((function(){wx.closeWindow()}))},children:"\u9000\u51fa"})]})]})}}]),n}(y.a.Component))||r)||r)||r)||r)||r)||r;t.a=Object(w.withRouter)(L)},M2Pz:function(e,t,n){"use strict";n("ma9I"),n("DQNa"),n("4l63"),n("rB9j"),n("hByQ"),n("EnZy");var r,o=n("nKUr"),a=n("lSNA"),i=n.n(a),c=n("J4zp"),s=n.n(c),u=n("lwsE"),l=n.n(u),d=n("W8MJ"),f=n.n(d),p=n("7W2i"),h=n.n(p),v=n("a1gu"),b=n.n(v),m=n("Nsbk"),g=n.n(m),j=n("q1tI"),y=n.n(j),O={container:"_1ohk8ldS_UzaLMLaIVCL0O",topBar:"_3qmFnvPGdSsMo5fT0Y19xT",left:"_1MWHgGRSBGClXyYuoDH--I",goback:"BPZFLe_kKyGJAwqTbgf-o",logoBox:"_2npRRUtqf6JuYA2if0cbyI",logo:"_2Q9LwFxoV00Id_YQWQjzox",joinLog:"KEOJL4DMrTPqYSgkXVazk",digest:"_3_ZuzeQY5qb-CJN2L_9U7b",right:"_39ja4W-hxPLMTQVmWcxj7v",siteInfo:"_2-jcAe0iG7geQQOE3Qf40W",item:"_3NC_VfNh0mpUnDxOyxAK99",text:"_7XrVOOKd2pVi9D9lvbYqt",shareText:"_3EzQkI_ACmQCVBqFtT49BM",content:"db3rZDfQVhwMSy_68t1L8",shareIcon:"_4G0Gpro2vqIAFsU2xn10n",joinInfo:"_1yd7LQ1sGgZUM5rFXGpJ0l",container_mode_login:"_3ieHJg4Z1J1SoY7_ZD3YCn",container_mode_invite:"_2PY9XIQ6wGHVDLv1En4lCi"},w=n("MCNy"),x=n.n(w),k=n("wdT/"),P=n.n(k),C=n("yuBF"),S=n("B5JU"),N=n.n(S),I=n("kjBj"),_=n("RiVy"),E=n("KBHl"),M=n("+3IH"),D=n("rOX+"),R=n.n(D),A=n("IvHc"),B=n("5BGO"),T=n("lN2P"),W=n("FeKq");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b()(this,n)}}var F=Object(C.inject)("site")(r=Object(C.inject)("user")(r=Object(C.inject)("index")(r=Object(C.observer)(r=function(e){h()(n,e);var t=U(n);function n(){var e;l()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={visible:!1,height:180,loadWeiXin:!1,show:!1},e.domRef=y.a.createRef(null),e.logoImg="/dzq-img/admin-logo-x2.png",e.onClose=function(){e.setState({visible:!1})},e.onCancel=function(){e.setState({show:!1})},e.handleH5Share=function(){var t,n,r=e.props.user,o=(null===(t=document)||void 0===t?void 0:t.title)||"";R()({title:o,path:Object(E.a)("/".concat(location.search),{inviteCode:(null===r||void 0===r||null===(n=r.userInfo)||void 0===n?void 0:n.id)||""})}),P.a.info({content:"\u590d\u5236\u94fe\u63a5\u6210\u529f"}),e.onCancel()},e.handleWxShare=function(){e.setState({visible:!0}),e.onCancel()},e.handleClick=function(){e.props.user.isLogin()?e.setState({show:!0}):Object(A.a)({url:"/user/login"})},e.createCard=function(){N.a.push({url:"/card"})},e.handleExperience=function(){N.a.push({url:"/card?experience=1"})},e}return f()(n,[{key:"getBgHeaderStyle",value:function(e){var t,n=this.props.site.webConfig||{};return null!==(t=n.setSite)&&void 0!==t&&t.siteBackgroundImage?{backgroundImage:"url(".concat(n.setSite.siteBackgroundImage,")")}:e?{background:e}:{background:"#2469f6"}}},{key:"getLogo",value:function(){var e,t=this.props.site.webConfig||{};return null!==(e=t.setSite)&&void 0!==e&&e.siteHeaderLogo?t.setSite.siteHeaderLogo:this.logoImg}},{key:"getSiteInfo",value:function(){var e=this.props.site.webConfig,t={countUsers:0,countThreads:0,siteAuthor:"",createDays:0};e&&e.other&&(t.countUsers=e.other.countUsers,t.countThreads=e.other.countThreads);var n=Object(M.a)(e,"setSite.siteAuthor.username",""),r=Object(M.a)(e,"setSite.siteInstall","").split(" "),o=s()(r,1)[0],a=Date.parse(o),i=Date.parse(new Date),c=Object(B.a)(parseInt(Math.abs(a-i)/1e3/60/60/24,10));return t.siteAuthor=n,t.createDays=c,t}},{key:"componentDidMount",value:function(){this.setState({loadWeiXin:Object(_.a)()}),this.domRef.current&&this.setState({height:this.domRef.current.clientHeight})}},{key:"returnPage",value:function(){var e,t,n;(null===(e=window)||void 0===e||null===(t=e.history)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.idx)<1?T.a.gotoIndex():N.a.back()}},{key:"render",value:function(){var e=this.props,t=e.bgColor,n=e.hideInfo,r=void 0!==n&&n,a=e.style,i=void 0===a?{}:a,c=e.digest,s=void 0===c?null:c,u=e.mode,l=void 0===u?"":u,d=e.site,f=this.state,p=f.visible,h=f.loadWeiXin,v=this.getSiteInfo(),b=v.countUsers,m=v.countThreads,g=v.siteAuthor,j=v.createDays,y=Object(M.a)(d,"webConfig.setSite.siteHeaderLogo","");return Object(o.jsxs)("div",{ref:this.domRef,className:"".concat(O.container," ").concat(l?O["container_mode_".concat(l)]:""),style:q(q({},i),this.getBgHeaderStyle(t)),children:[r&&"join"!==l&&Object(o.jsxs)("div",{className:O.topBar,children:["login"===l?Object(o.jsxs)("div",{onClick:this.returnPage,className:O.left,children:[Object(o.jsx)(x.a,{name:"LeftOutlined"}),"\u8fd4\u56de"]}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)("div",{children:Object(o.jsx)(x.a,{onClick:function(){return T.a.gotoIndex()},name:"HomeOutlined",color:"#fff",size:20})})]}),"join"!==l||y?Object(o.jsx)("div",{className:O.logoBox,children:Object(o.jsx)("img",{className:O.logo,mode:"aspectFit",src:this.getLogo(),alt:"\u56fe\u7247"})}):Object(o.jsx)("div",{className:O.joinLog,children:Object(o.jsx)("img",{className:O.logo,mode:"aspectFit",src:"/dzq-img/join-banner-bg.png",alt:"\u56fe\u7247"})}),s&&Object(o.jsxs)("div",{className:O.digest,children:[Object(o.jsxs)("div",{className:O.left,children:["\u7ad9\u957f ",s.admin]}),Object(o.jsxs)("div",{className:O.right,children:["\u5df2\u521b\u5efa ",s.day,"\u5929"]})]}),!r&&Object(o.jsxs)("ul",{className:O.siteInfo,children:[Object(o.jsxs)("li",{className:O.item,children:[Object(o.jsx)("span",{className:O.text,children:"\u6210\u5458"}),Object(o.jsx)("span",{className:O.content,children:Object(B.a)(b)})]}),Object(o.jsxs)("li",{className:O.item,children:[Object(o.jsx)("span",{className:O.text,children:"\u5185\u5bb9"}),Object(o.jsx)("span",{className:O.content,children:Object(B.a)(m)})]}),Object(o.jsxs)("li",{className:O.item,onClick:this.handleClick,children:[Object(o.jsx)(x.a,{className:O.shareIcon,color:"#fff",name:"ShareAltOutlined"}),Object(o.jsx)("span",{className:O.shareText,children:"\u5206\u4eab"})]})]}),Object(o.jsx)(W.a,{show:this.state.show,site:this.props.site,user:this.props.user,onClose:this.onCancel,handleH5Share:this.handleH5Share,handleWxShare:this.handleWxShare,createCard:this.createCard,handleExperience:this.handleExperience}),"join"===l&&Object(o.jsxs)("ul",{className:"".concat(O.siteInfo," ").concat(O.joinInfo),children:[Object(o.jsxs)("li",{className:O.item,children:[Object(o.jsx)("span",{className:O.text,children:"\u7ad9\u957f"}),Object(o.jsx)("span",{className:O.content,children:g})]}),Object(o.jsxs)("li",{className:O.item,children:[Object(o.jsx)("span",{className:O.text,children:"\u5df2\u521b\u5efa"}),Object(o.jsxs)("span",{className:O.content,children:[j,"\u5929"]})]})]}),h&&Object(o.jsx)(I.a,{visible:p,onClose:this.onClose})]})}}]),n}(y.a.Component))||r)||r)||r)||r;t.a=F},QIpd:function(e,t,n){var r=n("xrYK");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},QcND:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return z}));n("ma9I"),n("yq1k"),n("4mDm"),n("Rfxz"),n("wLYn"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("JTJg"),n("PKPk"),n("Rm1S"),n("UxlC"),n("3bBZ"),n("Kz25");var r=n("nKUr"),o=n("o0o1"),a=n.n(o),i=n("lSNA"),c=n.n(i),s=(n("ls82"),n("yXPU")),u=n.n(s),l=n("lwsE"),d=n.n(l),f=n("PJYZ"),p=n.n(f),h=n("W8MJ"),v=n.n(h),b=n("7W2i"),m=n.n(b),g=n("a1gu"),j=n.n(g),y=n("Nsbk"),O=n.n(y),w=n("q1tI"),x=n.n(w),k=n("yuBF"),P=n("n4oF"),C=n("zDaA"),S=n("sho3"),N=n("B5JU"),I=n.n(N),_=n("20a2"),E=n("bK+J"),M=n("/Nde"),D=n("MCNy"),R=n.n(D),A=n("pGE/"),B=n("Tk/S"),T=n("Xrmz"),W=n("ALHM"),L=n("E2vk"),q=n("yO9+"),U=n("lN2P"),F=n("FtgW"),H=n("kjc1"),Q=n.n(H);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var o=O()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j()(this,n)}}function z(t,n){var o,i=Object(k.inject)("site")(o=Object(k.inject)("forum")(o=Object(k.inject)("user")(o=Object(k.inject)("thread")(o=Object(k.inject)("emotion")(o=Object(k.inject)("commonLogin")(o=Object(k.inject)("plugin")(o=Object(k.inject)("invite")(o=Object(k.observer)(o=function(o){m()(c,o);var i=X(c);function c(e){var t,n;d()(this,c),(t=i.call(this,e)).handleWxShare=t.handleWxShare.bind(p()(t)),t.canPublish=t.canPublish.bind(p()(t));var r=e.serverUser,o=e.serverSite,a=e.serverEmotion,s=e.user,u=e.site,l=e.emotion,f=e.forum;return o&&o.platform&&u.setPlatform(o.platform),o&&o.closeSite&&u.setCloseSiteConfig(o.closeSite),o&&o.webConfig&&u.setSiteConfig(o.webConfig),o&&o.webConfig&&f.setOtherPermissions(o.webConfig),o&&o.pluginConfig&&u.setPluginConfig(o.pluginConfig),r&&r.userInfo&&s.setUserInfo(r.userInfo),r&&r.userPermissions&&s.setUserPermissions(r.userPermissions),a&&a.emojis&&l.setEmoji(a.emojis),n=Object(P.a)()?!o:!(u&&u.webConfig),t.state={isNoSiteData:n,isPass:!!Object(P.a)()},t}return v()(c,null,[{key:"getInitialProps",value:function(){var n=u()(a.a.mark((function n(r){var o,i,c,s,u,l,d,f,p,h,v,b;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.ssr_host=e.dzq_host||r.req&&r.req.headers&&r.req.headers.host,e.ctx=r,o="static",i={},u={},!Object(P.a)()){n.next=31;break}return v=r.req.headers,o=v&&!A.a.isEmptyObject(v)?Object(C.a)(v["user-agent"]):"static",Object(S.readEmoji)({},r),n.next=12,Object(S.readForum)({},r);case 12:if(i=n.sent,s={platform:o,closeSite:-3005===i.code?i.data:null,webConfig:i&&i.data||null},!i||0!==i.code||null===(f=i)||void 0===f||null===(p=f.data)||void 0===p||null===(h=p.user)||void 0===h||!h.userId){n.next=23;break}return n.next=17,Object(S.readUser)({params:{userId:i.data.user.userId}},r);case 17:return c=n.sent,n.next=20,Object(S.readPermissions)({},r);case 20:d=n.sent,l=c&&0===c.code?c.data:null,d=d&&0===d.code?d.data:null;case 23:return n.next=25,Object(S.readPluginList)({},r);case 25:if(0===(b=n.sent).code&&(s.pluginConfig=b.data),!i||0!==i.code||!t.getInitialProps){n.next=31;break}return n.next=30,t.getInitialProps(r,{user:l,site:s});case 30:u=n.sent;case 31:return n.abrupt("return",K(K({},u),{},{serverSite:s,serverUser:{userInfo:l,userPermissions:d}}));case 34:return n.prev=34,n.t0=n.catch(0),console.log("err",n.t0),n.abrupt("return",{serverSite:{},serverUser:{}});case 38:case"end":return n.stop()}}),n,null,[[0,34]])})));return function(e){return n.apply(this,arguments)}}()}]),v()(c,[{key:"componentDidMount",value:function(){var e=u()(a.a.mark((function e(){var t,r,o,i,c,s,u,l,d,f,p,h,v,b,m,g,j,y,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.isNoSiteData,o=this.props,i=o.serverUser,c=o.serverSite,s=o.user,u=o.site,l=o.emotion,d=o.forum,p=!1,h=decodeURIComponent(this.props.router.asPath),v=new RegExp("(^|[&|?])inviteCode=([^&]*)(&|$)"),(b=h.match(v))&&this.props.invite.setInviteCode(b[2]),null!==(t=l.emojis)&&void 0!==t&&t.length||l.fetchEmoji(),u.setPlatform(Object(C.a)(window.navigator.userAgent)),!r){e.next=21;break}if(f=(null===c||void 0===c?void 0:c.webConfig)||null){e.next=19;break}return e.next=14,Object(S.readForum)({});case 14:(m=e.sent).data&&u.setSiteConfig(m.data),m.data&&d.setOtherPermissions(m.data),this.setAppCommonStatus(m),f=m.data||null;case 19:e.next=22;break;case 21:f=u?u.webConfig:null;case 22:if(!u||!u.pluginConfig){e.next=26;break}Q()(u.pluginConfig,this.props.plugin.setPluginComponent.bind(this.props.plugin)),e.next=30;break;case 26:return e.next=28,Object(S.readPluginList)();case 28:0===(g=e.sent).code&&(u.setPluginConfig(g.data),Q()(g.data,this.props.plugin.setPluginComponent.bind(this.props.plugin)));case 30:if(u.initUserLoginEntryStatus(),!f||!f.user){e.next=47;break}if(s&&s.userInfo||i&&i.userInfo){e.next=44;break}return e.next=35,Object(S.readUser)({params:{userId:f.user.userId}});case 35:return j=e.sent,e.next=38,Object(S.readPermissions)({});case 38:0===(y=e.sent).code&&y.data&&s.setUserPermissions(y.data),j.data&&s.setUserInfo(j.data),p=!!j.data,e.next=45;break;case 44:p=!0;case 45:e.next=48;break;case 47:p=!1;case 48:return s.updateLoginStatus(p),O=this.isPass(r),n&&O&&(O=n(O)),this.setState({isPass:O}),e.next=54,Object(W.a)(f&&f.passport&&f.passport.offiaccountOpen);case 54:e.sent&&(this.handleWxShare(this.props.router.asPath),this.props.router.events.on("routeChangeComplete",this.handleWxShare));case 56:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleWxShare",value:function(e){if(window.wx&&window.wx.hasDoneConfig){var t=this.props,n=t.user,r=t.site,o=n.userInfo,a=r.webConfig.setSite,i=a.siteName,c=a.siteIntroduction,s=a.siteHeaderLogo,u=a.siteFavicon,l=o||{},d=l.nickname,f=l.avatarUrl,p=l.signature,h=l.id,v=document.title,b=c?c.length>35?"".concat(c.substr(0,35),"..."):c:"\u5728\u8fd9\u91cc\uff0c\u53d1\u73b0\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9",m=window.location.href,g=s||u;e.match(/\/thread\/\d+/)||e.match(/\/user\/\d+/)||("/my"===e&&d&&(v="".concat(d,"\u7684\u4e3b\u9875"),g=f,b=p?p.length>35?"".concat(p.substr(0,35),"..."):p:"\u5728\u8fd9\u91cc\uff0c\u53d1\u73b0\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9",m="".concat(window.location.origin,"/user/").concat(h)),(e.includes("/forum/partner-invite")||e.match(/\/user\/(username|wx|phone)-login/)||e.includes("/user/register"))&&(v="\u9080\u8bf7\u60a8\u52a0\u5165".concat(i)),(e.includes("/invite")||"/"===e)&&(v="".concat(d||"","\u9080\u8bf7\u60a8\u52a0\u5165").concat(i)),e.includes("/message?page=chat")&&(v="\u6211\u7684\u79c1\u4fe1 - ".concat(i),m="".concat(window.location.origin,"/message")),Object(B.a)(v,b,m,g,h))}}},{key:"setAppCommonStatus",value:function(e){var t=this.props.site;switch([q.k,q.n,q.h,q.m,q.i,q.o,q.l].includes(e.code)&&U.a.saveCurrentUrl(),e.code){case 0:break;case q.v:t.setCloseSiteConfig(e.data),I.a.redirect({url:"/close"});break;case q.f:break;case q.x:Object(E.a)(),window.location.reload();break;case q.g:I.a.redirect({url:"/404"});break;case q.k:Object(E.a)(),U.a.gotoLogin();break;case q.n:Object(E.a)(),U.a.saveAndRedirect("/user/register");break;case q.h:I.a.push({url:"/user/status?statusCode=2"});break;case q.m:I.a.push({url:"/user/status?statusCode=-4007"});break;case q.i:I.a.push({url:"/user/status?statusCode=-4009"});break;case q.o:U.a.saveAndRedirect("/user/supplementary");break;case q.j:I.a.redirect({url:"/"});break;case q.l:U.a.saveAndRedirect("/forum/partner-invite");break;default:t.setErrPageType("site"),I.a.redirect({url:"/500"})}}},{key:"checkJump",value:function(){var e=this.props.router,t=U.a.getUrl();if(t){var n=new URL(t);if(n.pathname===e.asPath||n.pathname.includes("/cate/"))U.a.clear();else if("/"===e.asPath)return U.a.restore(),!1}return!0}},{key:"isPass",value:function(e){var t=this.props,n=t.site,r=t.router,o=t.user,a=t.commonLogin;if(n&&n.webConfig){var i,c;if(e&&this.setState({isNoSiteData:!1}),"/close"!==r.asPath&&n.closeSiteConfig)return I.a.redirect({url:"/close"}),!1;if(o.isLogin()){if(!n.isOffiaccountOpen&&!n.isMiniProgramOpen&&"/user/bind-phone"!==r.asPath&&n.isSmsOpen&&!o.mobile)return U.a.saveAndRedirect("/user/bind-phone"),!1;if("/user/bind-nickname"!==r.asPath&&!o.nickname)return a.needToCompleteExtraInfo=o.userStatus===F.a.SUPPLEMENTARY,U.a.saveAndRedirect("/user/bind-nickname"),!1;if(o.userStatus===M.b&&!q.u.includes(r.pathname))return I.a.replace({url:"/user/status?statusCode=".concat(o.userStatus)}),!1}if("pay"===(null===n||void 0===n||null===(i=n.webConfig)||void 0===i||null===(c=i.setSite)||void 0===c?void 0:c.siteMode)){var s;if(q.y.some((function(e){return r.asPath.match(e)})))return this.checkJump(),!0;var u=r.query.inviteCode,l=u?"?inviteCode=".concat(u):"";if((null===o||void 0===o||!o.paid)&&0===(null===o||void 0===o||null===(s=o.group)||void 0===s?void 0:s.level)||!o.isLogin())return U.a.saveAndRedirect("/forum/partner-invite".concat(l)),!1}}return this.checkJump()}},{key:"filterProps",value:function(e){var t=K({},e);return delete t.serverUser,delete t.serverSite,delete t.user,delete t.site,t}},{key:"canPublish",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props,r=n.user,o=n.site,a=n.thread;return Object(L.a)(r,o,t,null===a||void 0===a||null===(e=a.threadData)||void 0===e?void 0:e.threadId)}},{key:"render",value:function(){var e=this.state,n=e.isNoSiteData,o=e.isPass;return"static"===this.props.site.platform?null:n||!o?Object(r.jsx)("div",{className:T.a.loadingBox,children:Object(r.jsx)(R.a,{className:T.a.loading,name:"LoadingOutlined",size:"large"})}):Object(r.jsx)(t,K({canPublish:this.canPublish},this.filterProps(this.props)))}}]),c}(x.a.Component))||o)||o)||o)||o)||o)||o)||o)||o)||o;return Object(_.withRouter)(i)}}).call(this,n("ntbh"))},R5XZ:function(e,t,n){var r=n("I+eb"),o=n("2oRo"),a=n("NC/Y"),i=[].slice,c=function(e){return function(t,n){var r=arguments.length>2,o=r?i.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:c(o.setTimeout),setInterval:c(o.setInterval)})},RiVy:function(e,t,n){"use strict";function r(){if("undefined"===typeof window)return!1;var e=window.navigator.userAgent.toLowerCase();return/micromessenger/.test(e)}n.d(t,"a",(function(){return r}))},"Tk/S":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("lY1M"),o=n("KBHl");function a(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";r.b.env("weixin")&&window.wx&&window.wx.ready((function(){var r={title:e||"Discuz! Q",desc:t&&""!=t?t:e||"Discuz! Q",link:Object(o.a)(n||window.location.href,{inviteCode:i}),imgUrl:a};wx.updateAppMessageShareData(r),wx.updateTimelineShareData(r),wx.onMenuShareWeibo(r)}))}},WweE:function(e,t,n){"use strict";n.r(t);var r,o=n("nKUr"),a=n("lwsE"),i=n.n(a),c=n("W8MJ"),s=n.n(c),u=n("7W2i"),l=n.n(u),d=n("a1gu"),f=n.n(d),p=n("Nsbk"),h=n.n(p),v=n("q1tI"),b=n.n(v),m=n("L85e"),g=n("yuBF"),j=n("J0pL"),y=n("zVgw"),O=n("xfbP"),w=n("QcND");function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var k=Object(g.inject)("site")(r=function(e){l()(n,e);var t=x(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return Object(o.jsx)(j.a,{h5:Object(o.jsx)(m.a,{}),pc:Object(o.jsx)(y.a,{jumpUrl:"/user/login"}),title:"\u6388\u6743\u767b\u5f55"})}}]),n}(b.a.Component))||r;t.default=Object(w.a)(Object(O.a)("weixin")(k))},Xol8:function(e,t,n){var r=n("hh1v"),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},Xrmz:function(e,t,n){"use strict";t.a={loadingBox:"IaolWSnqMjqk8NJnV76AR",loading:"SeS7jrWNwr45DU-hTARv9"}},Xuae:function(e,t,n){"use strict";var r=n("RIqP"),o=n("lwsE"),a=n("W8MJ"),i=(n("PJYZ"),n("7W2i")),c=n("a1gu"),s=n("Nsbk");function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}t.__esModule=!0,t.default=void 0;var l=n("q1tI"),d=function(e){i(n,e);var t=u(n);function n(e){var a;return o(this,n),(a=t.call(this,e))._hasHeadManager=void 0,a.emitChange=function(){a._hasHeadManager&&a.props.headManager.updateHead(a.props.reduceComponentsToState(r(a.props.headManager.mountedInstances),a.props))},a._hasHeadManager=a.props.headManager&&a.props.headManager.mountedInstances,a}return a(n,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),n}(l.Component);t.default=d},"bC0/":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.pluginName,r=t.author,a=t.type,i=t.app_id,c=t.pluginVersion,s=t.pluginComponentName,u=t.pluginData,l=t.callback,d=t.preCallback,f=u.disables,p=u.pluginFiles,h=p.js,v=p.css;if(!f){if(this.task={},this.pluginComponentName=s,this.callback=l,this.preCallback=d,h&&0!==h.length)for(var b=0;b<h.length;b++)this.task[h[b]]={type:"js",done:!1};if(v&&0!==v.length)for(var m=0;m<h.length;m++)this.task[v[m]]={type:"css",done:!1};this.isEmptyObject(this.task)||(this.preRegister(o(o({},u),{},{pluginName:n,version:c,author:r,type:a,app_id:i,component:"padding"})),this.start())}}var t,n,r;return t=e,(n=[{key:"preRegister",value:function(e){e.pluginName,e.disables,e.version,e.target,e.hookName,e.component,e.author,e.type,e.app_id,e.platform,e.path,e.options,this.preCallback(e)}},{key:"isEmptyObject",value:function(e){for(var t in e)return!1;return!0}},{key:"start",value:function(){for(var e in this.task){var t=this.task[e].type;"js"===t?this.createJS(e):"css"===t&&this.createCSS(e)}}},{key:"createJS",value:function(e){var t=this,n=document.createElement("script");n.src=e,n.onload=function(){t.task[e]&&(t.task[e].done=!0),t.check()&&t.callback(t.pluginComponentName)},n.onerror=function(){console.error("".concat(t.pluginComponentName,", \u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff1a").concat(e))},document.body.appendChild(n)}},{key:"createCSS",value:function(e){var t=this,n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",n.onload=function(){t.task[e]&&(t.task[e].done=!0),t.check()&&t.callback(t.pluginComponentName)},n.onerror=function(){console.error("".concat(t.pluginComponentName,", \u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff1a").concat(e))},document.head.appendChild(n)}},{key:"check",value:function(){for(var e in this.task)if(!this.task[e].done)return!1;return!0}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=c},g4pe:function(e,t,n){e.exports=n("8Kt/")},ggaN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonLogicalAdapter=void 0;var r=(0,n("mlqK").baseAdapterFactory)({defaultAdapter:{},adapterImplement:function(){return n("KvOD").ButtonWebAdapter}});t.ButtonLogicalAdapter=r},hByQ:function(e,t,n){"use strict";var r=n("14Sl"),o=n("glrk"),a=n("HYAF"),i=n("Ep9I"),c=n("FMNM");r("search",1,(function(e,t,n){return[function(t){var n=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=o(e),s=String(this),u=a.lastIndex;i(u,0)||(a.lastIndex=0);var l=c(a,s);return i(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},i6QF:function(e,t,n){n("I+eb")({target:"Number",stat:!0},{isInteger:n("Xol8")})},k8W2:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("lwsE")),a=r(n("W8MJ")),i=r(n("7W2i")),c=r(n("a1gu")),s=r(n("Nsbk")),u=r(n("lSNA")),l=r(n("q1tI")),d=n("GDuN"),f=n("9rcn"),p=n("HZIX"),h=n("AItd"),v=r(n("KxVQ"));function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,i.default)(n,e);var t=b(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,v.default)({componentName:"popup"}),r}return(0,a.default)(n,[{key:"render",value:function(){var e=this.RenderComponent;return l.default.createElement(e,this.props,this.props.children)}}]),n}((0,d.baseComponentFactory)({viewAdapter:f.PopupViewAdapter,logicalAdapter:p.PopupLogicalAdapter}));t.default=m,(0,u.default)(m,"defaultProps",{position:"bottom",maskClosable:!0,onClose:h.noop,containerClassName:""})},kEK2:function(e,t,n){"use strict";var r=n("TqRt");n("Eqjn"),Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWebLayout=function(e){var t=e.position,n=e.visible,r=e.onClose,v=e.onCancel,b=void 0===v?f.noop:v,m=e.onSubmit,g=void 0===m?f.noop:m,j=e.maskClosable,y=e.children,O=e.className,w=e.containerClassName,x=e.withCloseIcon,k=e.popupContainer,P=e.withFooter,C=(0,a.default)(e,p),S=(0,d.useConfig)().clsPrefix;i.default.useEffect((function(){n?h.afterOpen():h.beforeClose()}),[n]);var N=i.default.createElement("div",(0,o.default)({className:(0,l.default)("".concat(S,"-popup"),O)},C),i.default.createElement("div",{className:(0,l.default)("".concat(S,"-popup__overlay"),{"is-shown":n}),onClick:function(){j&&r()}}),i.default.createElement("div",{className:(0,l.default)("".concat(S,"-popup__container"),w,t,{"is-shown":n,"is-expanded":n})},x&&i.default.createElement("div",{className:(0,l.default)("".concat(S,"-popup__close-icon")),onClick:function(){r()}},i.default.createElement(s.default,{name:"CloseOutlined"})),y,P&&i.default.createElement("div",{className:(0,l.default)("".concat(S,"-popup__footer"))},i.default.createElement(u.default,{className:(0,l.default)("".concat(S,"-popup__btn")),type:"info",onClick:function(){r(),b()}},"\u53d6\u6d88"),i.default.createElement(u.default,{className:(0,l.default)("".concat(S,"-popup__btn")),type:"primary",onClick:function(){g()}},"\u786e\u8ba4"))));if("undefined"===typeof window)return N;return c.default.createPortal(N,k||document.getElementsByTagName("body")[0])};var o=r(n("pVnL")),a=r(n("QILm")),i=r(n("q1tI")),c=r(n("i8i4")),s=r(n("MCNy")),u=r(n("5f2u")),l=r(n("TSYQ")),d=n("VTYn"),f=n("AItd"),p=["position","visible","onClose","onCancel","onSubmit","maskClosable","children","className","containerClassName","withCloseIcon","popupContainer","withFooter"];"undefined"!==typeof document&&("scrollingElement"in document||function(){function e(e){return window.getComputedStyle?getComputedStyle(e,null):e.currentStyle}var t;function n(e){return"none"!=e.display&&!("collapse"==e.visibility&&/^table-(.+-group|row|column)$/.test(e.display))}var r=function(){if(function(){if(!/^CSS1/.test(document.compatMode))return!1;if(void 0===t){var e=document.createElement("iframe");e.style.height="1px",(document.body||document.documentElement||document).appendChild(e);var n=e.contentWindow.document;n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),n.close(),t=n.documentElement.scrollHeight>n.body.scrollHeight,e.parentNode.removeChild(e)}return t}())return document.documentElement;var r=document.body;return(r=r&&!/body/i.test(r.tagName)?function(e){for(var t,n=e;n=n.nextSibling;)if(1==n.nodeType&&(t=n,window.HTMLBodyElement?t instanceof HTMLBodyElement:/body/i.test(t.tagName)))return n;return null}(r):r)&&function(t){var r=e(t),o=e(document.documentElement);return"visible"!=r.overflow&&"visible"!=o.overflow&&n(r)&&n(o)}(r)?null:r};Object.defineProperty?Object.defineProperty(document,"scrollingElement",{get:r}):document.__defineGetter__?document.__defineGetter__("scrollingElement",r):(document.scrollingElement=r(),document.attachEvent&&document.attachEvent("onpropertychange",(function(){"activeElement"==window.event.propertyName&&(document.scrollingElement=r())})))}());var h=function(e){var t;return{afterOpen:function(){t=document.scrollingElement.scrollTop,document.body.classList.add(e),document.body.style.top="".concat(-t,"px")},beforeClose:function(){document.body.classList.remove(e),t&&(document.scrollingElement.scrollTop=t)}}}("modal-open")},kSko:function(e,t,n){n("I+eb")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},kjBj:function(e,t,n){"use strict";var r=n("nKUr"),o=n("q1tI"),a=n.n(o),i="yO5m4iE3XykJ_LV6vCp6B",c="_387TLuQBVV5DmIjitoZeOq",s="_1p2dahnsuzb5Oj3gug1CSo",u="_3tIqD3TdOoL_UKfw9D3hrK",l=n("k8W2"),d=n.n(l),f=n("z6Ap"),p=function(e){var t=e.visible,n=void 0!==t&&t,o=e.onClose,a=void 0===o?f.e:o,l=e.type,p=void 0===l?"":l;return Object(r.jsx)(d.a,{position:"top",visible:n,onClose:a,children:Object(r.jsxs)("div",{className:"".concat("thread"===p?u:i),children:[Object(r.jsx)("img",{alt:"\u56fe\u7247",src:"/dzq-img/sharePoint.png",className:c}),Object(r.jsx)("img",{alt:"\u56fe\u7247",src:"/dzq-img/shareKnow.png",className:s,onClick:a})]})})};t.a=a.a.memo(p)},kjc1:function(e,t,n){"use strict";n("ma9I"),n("2B1R"),n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||0===e.length)return;for(var n=0;n<e.length;n++)s(e[n],t)};var r=a(n("bC0/")),o=a(n("4x5+"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){window.DZQPlugin[e].default||console.error("".concat(e,"\u6ca1\u6709\u627e\u5230default\u5c5e\u6027").concat(window.DZQPlugin[e]));var n=o.default.register(window.DZQPlugin[e].default);n&&n.map&&n.pluginName&&t(n.pluginName,n.map)}function c(e,t){var n=o.default.register(e);n&&n.map&&n.pluginName&&t(n.pluginName,n.map)}function s(e,t){var n=e.name_en,o=e.version,a=e.view,s=e.author;if(a)for(var u in a)a[u].pluginFiles&&new r.default({pluginName:n,pluginVersion:o,pluginComponentName:u,pluginData:a[u],author:s,callback:function(e){i(e,t)},preCallback:function(e){c(e,t)}})}},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=o},rGXy:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getWXConfig=function(){return h.apply(this,arguments)};var o=r(n("o0o1")),a=r(n("lSNA")),i=r(n("QILm"));n("ls82");var c=r(n("yXPU")),s=n("0QFe"),u=r(n("m4Ii")),l=["params","data"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={messageText:{type:"string",required:!0},recipientUsername:{type:"string",required:!0},imageUrl:{type:"string"},attachmentId:{type:"number"}};function h(){return(h=(0,c.default)(o.default.mark((function e(){var t,n,r,a,c,d,h,v,b=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.prev=1,n=t.params,r=void 0===n?{}:n,a=t.data,c=void 0===a?{}:a,d=(0,i.default)(t,l),h=f(f({url:"/api/v3/offiaccount/jssdk",method:"GET",params:r,data:c},d),{},{validateRules:p}),e.next=6,u.default.dispatcher(h);case 6:return v=e.sent,e.abrupt("return",v);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",(0,s.handleError)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}},toAj:function(e,t,n){"use strict";var r=n("I+eb"),o=n("ppGB"),a=n("QIpd"),i=n("EUja"),c=n("0Dky"),s=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)};r({target:"Number",proto:!0,forced:s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}))},{toFixed:function(e){var t,n,r,c,s=a(this),d=o(e),f=[0,0,0,0,0,0],p="",h="0",v=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*f[n],f[n]=r%1e7,r=u(r/1e7)},b=function(e){for(var t=6,n=0;--t>=0;)n+=f[t],f[t]=u(n/e),n=n%e*1e7},m=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==f[e]){var n=String(f[e]);t=""===t?n:t+i.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(s*l(2,69,1))-69)<0?s*l(2,-t,1):s/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(v(0,n),r=d;r>=7;)v(1e7,0),r-=7;for(v(l(10,r,1),0),r=t-1;r>=23;)b(1<<23),r-=23;b(1<<r),v(1,1),b(2),h=m()}else v(0,n),v(1<<-t,0),h=m()+i.call("0",d);return h=d>0?p+((c=h.length)<=d?"0."+i.call("0",d-c)+h:h.slice(0,c-d)+"."+h.slice(c-d)):p+h}})},xfbP:function(e,t,n){"use strict";var r=n("lSNA"),o=n.n(r),a=n("nKUr"),i=n("lwsE"),c=n.n(i),s=n("W8MJ"),u=n.n(s),l=n("7W2i"),d=n.n(l),f=n("a1gu"),p=n.n(f),h=n("Nsbk"),v=n.n(h),b=n("q1tI"),m=n.n(b),g=n("yuBF"),j=n("n4oF"),y=n("lN2P");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}t.a=function(e){return function(t){var n;return Object(g.inject)("site")(n=function(n){d()(i,n);var r=w(i);function i(t){var n;if(c()(this,i),(n=r.call(this,t)).getCurrentMode=function(){return"none"!==n.props.site.wechatEnv?"weixin":n.props.site.isSmsOpen?"mobile":"user"},Object(j.a)())return p()(n);var o=n.getCurrentMode();return"weixin"===e&&"weixin"!==o&&y.a.saveAndLogin(),"phone"===e&&("user"!==o||n.props.site.isSmsOpen||y.a.saveAndLogin()),"user"===e&&"user"!==o&&y.a.saveAndLogin(),"register"===e&&"user"!==o&&y.a.saveAndLogin(),n}return u()(i,[{key:"render",value:function(){return Object(a.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props))}}]),i}(m.a.Component))||n}}},yq1k:function(e,t,n){"use strict";var r=n("I+eb"),o=n("TWQb").includes,a=n("RNIs");r({target:"Array",proto:!0,forced:!n("rkAj")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},z6Ap:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d}));n("TeQF"),n("QWBl"),n("yXV3"),n("sMBO"),n("B6y2"),n("FZtP"),n("R5XZ");var r=n("RIqP"),o=n.n(r),a=(n("q1tI"),arguments),i=void 0,c=function(){},s=function(e,t){var n;return function(){var r=i,c=o()(a);n&&clearTimeout(n);var s=!n;n=setTimeout((function(){n=null}),t),s&&e.apply(r,c)}},u=function(e){var t={text:(null===e||void 0===e?void 0:e.text)||"",plugin:{}};return Object.values((null===e||void 0===e?void 0:e.indexes)||{}).forEach((function(e){var n=e.tomId,r=e.threadId,o=(n="".concat(n))?""+n:"NULL";if("101"===o)t.imageData=e.body;else if("102"===o)t.audioData=e.body;else if("103"===o)t.videoData=e.body;else if("104"===o)t.goodsData=e.body;else if("105"===o)t.qaData=e.body;else if("106"===o)t.redPacketData=e.body;else if("107"===o)t.rewardData=e.body;else if("108"===o)t.fileData=e.body;else if("109"===o)t.voteData=e.body;else if("10002"===o)t.iframeData=e.body;else{var a=e.tomId,i=e.body,c=e._plugin,s=void 0===c?{}:c;s&&(t.plugin[null===s||void 0===s?void 0:s.name]={tomId:a,body:i,_plugin:s})}t.threadId=r})),t},l=["7Z","AI","APK","CAD","CDR","DOC","DOCX","EPS","EXE","IPA","MP3","MP4","PDF","PPT","PSD","RAR","TXT","XLS","XLSX","ZIP","JPG","WAV"],d=function(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then}},zDaA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("n4oF");function o(e){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"h5":"pc";if(!Object(r.a)()){var n=90===Math.abs(window.orientation),o=window.innerWidth;"pc"===t&&o<800&&(t="h5"),"h5"===t&&!n&&o>=800&&(t="pc")}return t}},zLVW:function(e,t,n){"use strict";var r=n("TqRt"),o=n("cDf5");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonWebLayout=void 0;var a=r(n("lwsE")),i=r(n("W8MJ")),c=r(n("7W2i")),s=r(n("a1gu")),u=r(n("Nsbk")),l=r(n("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),f=n("VTYn"),p=r(n("TSYQ")),h=r(n("jqTq"));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,c.default)(n,e);var t=b(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e)).state={isMouseDown:!1,isMouseEnter:!1},r}return(0,i.default)(n,[{key:"onClick",value:function(e){this.props.loading||this.props.disabled||this.props.onClick&&this.props.onClick(e)}},{key:"onMouseLeave",value:function(e){this.setState({isMouseEnter:!1})}},{key:"onMouseEnter",value:function(e){this.props.disabled||this.setState({isMouseEnter:!0})}},{key:"onMouseDown",value:function(e){this.props.disabled||this.setState({isMouseDown:!0})}},{key:"onMouseUp",value:function(e){var t=this;setTimeout((function(){t.setState({isMouseDown:!1})}),50)}},{key:"render",value:function(){var e=this,t=this.props,n=t.size,r=void 0===n?"medium":n,o=t.type,a=t.htmlType,i=t.disabled,c=t.loading,s=t.style,u=t.className,l=t.circle,f=t.full,v=this.context.clsPrefix,b="".concat(v,"-button"),m=(0,p.default)(b,u,r&&"".concat(b,"--").concat(r),o&&"".concat(b,"--").concat(o),{"is-full":f,"is-loading":c,"is-disabled":i,"is-circle":l,"is-mousedown":this.state.isMouseDown,"is-mouseenter":this.state.isMouseEnter});return d.default.createElement("button",{style:s,className:m,type:a,onClick:this.onClick.bind(this),onMouseEnter:function(t){return e.onMouseEnter(t)},onMouseLeave:function(t){return e.onMouseLeave(t)},onMouseDown:function(t){return e.onMouseDown(t)},onMouseUp:function(t){return e.onMouseUp(t)}},c&&d.default.createElement(h.default,{type:"spinner",size:16}),this.props.children)}}]),n}(d.Component);t.ButtonWebLayout=m,(0,l.default)(m,"contextType",f.ConfigContext)},zVgw:function(e,t,n){"use strict";var r=n("o0o1"),o=n.n(r),a=(n("ls82"),n("yXPU")),i=n.n(a),c=n("q1tI"),s=n.n(c),u=n("B5JU"),l=n.n(u),d=function(){};t.a=function(e){var t=e.jumpUrl,n=void 0===t?"":t,r=e.beforeJump,a=void 0===r?d:r,c=e.afterJump,u=void 0===c?d:c;return s.a.useEffect(i()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return l.a.redirect({url:n}),e.abrupt("return",i()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)}))),[]),null}}},[["63fP",0,1,4,3,2]]]);