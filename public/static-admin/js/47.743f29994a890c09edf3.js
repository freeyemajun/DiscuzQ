(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"8ss3":function(t,e,s){"use strict";s.r(e);var a=s("Jk8/"),i=s("cabW");for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var r=s("KHd+"),o=Object(r.a)(i.default,a.a,a.b,!1,null,null,null);e.default=o.exports},Bouk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(s("4gYi")),i=n(s("pNQN"));function n(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{picture:"",fileExtension:"",maximumSize:"",restrictionsOn:"",downloads:"",quantityLimit:"9",maxUpload:50}},created:function(){this.annexSet()},methods:{annexSet:function(){var t=this;this.appFetch({url:"forum_get_v3",method:"get",data:{}}).then((function(e){if(e.errors)t.$message.error(e.errors[0].code);else{if(0!==e.Code)return void t.$message.error(e.Message);var s=e.Data;t.picture=s.setAttach.supportImgExt,t.fileExtension=s.setAttach.supportFileExt,t.maximumSize=s.setAttach.supportMaxSize,t.quantityLimit=s.setAttach.supportMaxUploadAttachmentNum,t.maxUpload=s.setAttach.maxUploadAttachmentNum,Number(s.setAttach.supportMaxDownloadNum)>0?(t.restrictionsOn="2",t.downloads=Number(s.setAttach.supportMaxDownloadNum)):(t.restrictionsOn="1",t.downloads="")}}))},onblurFun:function(){this.maximumSize>100&&this.$message("最大尺寸不能超过100MB")},submi:function(){var t=this,e=/^[0-9]*$/,s=this.picture,a=this.fileExtension,i=this.maximumSize;if(s)if(a)if(i)if(i>100)this.$message.error("最大尺寸不能超过100MB");else if(/^\d+$|^\d+[.]?\d+$/.test(i))if(e.test(i)){if("2"===this.restrictionsOn){if(this.downloads<=0||""===this.downloads)return void this.$message.error("下载次数请输入大于0的正整数");if(!e.test(this.downloads))return void this.$message.error("下载次数请输入大于0的正整数")}Number(this.quantityLimit)<1?this.$message.error("发帖时一次性可添加附件数为大于0的整数"):this.appFetch({url:"settings_post_v3",method:"post",data:{data:[{key:"support_img_ext",value:this.picture,tag:"default"},{key:"support_file_ext",value:this.fileExtension,tag:"default"},{key:"support_max_size",value:this.maximumSize,tag:"default"},{key:"support_max_download_num",value:"1"===this.restrictionsOn?0:this.downloads,tag:"default"},{key:"support_max_upload_attachment_num",value:this.quantityLimit,tag:"default"}]}}).then((function(e){if(e.errors)t.$message.error(e.errors[0].code);else{if(0!==e.Code)return void t.$message.error(e.Message);t.$message({message:"提交成功",type:"success"}),t.annexSet()}})).catch((function(t){}))}else this.$message.error("请输入正确的支持最大尺寸格式");else this.$message.error("请输入正确的支持最大尺寸格式");else this.$message.error("请您输入支持的最大尺寸");else this.$message.error("请您输入文件扩展名");else this.$message.error("请您输入图片扩展名")}},components:{Card:a.default,CardRow:i.default}}},"Jk8/":function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return i}));var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"annex-set-box"},[e("Card",{attrs:{header:"支持的图片扩展名："}},[e("CardRow",{attrs:{description:"多个请用,隔开，例如 png,gif,jpg,jpeg,heic"}},[e("el-input",{model:{value:t.picture,callback:function(e){t.picture=e},expression:"picture"}})],1)],1),t._v(" "),e("Card",{attrs:{header:"支持的文件扩展名："}},[e("CardRow",{attrs:{description:"多个请用,隔开，例如 doc,docx,pdf,zip"}},[e("el-input",{model:{value:t.fileExtension,callback:function(e){t.fileExtension=e},expression:"fileExtension"}})],1)],1),t._v(" "),e("Card",{attrs:{header:"支持的最大尺寸："}},[e("CardRow",{attrs:{description:"单位：MB"},scopedSlots:t._u([{key:"tail",fn:function(){return[e("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"https://discuz.com/manual-admin/2.html#_2-5-%E9%99%84%E4%BB%B6%E8%AE%BE%E7%BD%AE",target:"_blank"}},[t._v("附件尺寸设置指南")])]},proxy:!0}])},[e("el-input",{attrs:{type:"number"},nativeOn:{"!blur":function(e){return t.onblurFun.apply(null,arguments)}},model:{value:t.maximumSize,callback:function(e){t.maximumSize=e},expression:"maximumSize"}})],1)],1),t._v(" "),e("Card",{staticClass:"annex-set-box__copy",attrs:{header:"用户一天内可下载附件次数："}},[e("CardRow",[e("el-radio",{attrs:{label:"1"},model:{value:t.restrictionsOn,callback:function(e){t.restrictionsOn=e},expression:"restrictionsOn"}},[t._v("不限制")]),t._v(" "),e("el-radio",{attrs:{label:"2"},model:{value:t.restrictionsOn,callback:function(e){t.restrictionsOn=e},expression:"restrictionsOn"}},[t._v("\n        自定义\n      ")]),t._v(" "),e("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"100PX"},attrs:{type:"number",size:"small"},on:{input:t.downloadsNumInput},model:{value:t.downloads,callback:function(e){t.downloads=e},expression:"downloads"}}),t._v("次\n      "),e("span",{staticClass:"annex-set-box__copy-span"},[t._v("如果在用户设置中开启了游客可下载附件权限，则游客下载不受次数限制")])],1)],1),t._v(" "),e("Card",{staticClass:"annex-set-box__limit",attrs:{header:"发帖时一次性可添加附件数："}},[e("CardRow",[e("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"100PX"},attrs:{type:"number",size:"small"},model:{value:t.quantityLimit,callback:function(e){t.quantityLimit=e},expression:"quantityLimit"}}),t._v("个\n      "),e("span",{staticClass:"annex-set-box__limit-title"},[t._v("最多可设置"+t._s(t.maxUpload)+"个")])],1)],1),t._v(" "),e("Card",{staticClass:"footer-btn"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.submi}},[t._v("提交")])],1)],1)},i=[]},XxXD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(s("QbLZ")),i=n(s("Bouk"));function n(t){return t&&t.__esModule?t:{default:t}}s("lpfh"),e.default=(0,a.default)({name:"annex-set-view"},i.default)},cabW:function(t,e,s){"use strict";s.r(e);var a=s("XxXD"),i=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e.default=i.a}}]);