(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{CLKg:function(e,t,n){"use strict";n.r(t);var r=n("lqbk"),s=n("S3tc");for(var i in s)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(i);var o=n("KHd+"),a=Object(o.a)(s.default,r.a,r.b,!1,null,null,null);t.default=a.exports},S3tc:function(e,t,n){"use strict";n.r(t);var r=n("dEJ1"),s=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=s.a},Uvy3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("4gYi")),s=i(n("pNQN"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Card:r.default,CardRow:s.default},data:function(){return{activeIndex:"2",ssrText:"",configPath:"http://service-74pdgz7k-1258344699.gz.apigw.tencentcs.com"}},created:function(){this.tencentCloudList()},methods:{tencentCloudList:function(){var e=this;this.appFetch({url:"forum_get_v3",method:"get",data:{}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);var n=t.Data;n.qcloud.qcloudSsrAccessPath&&(e.configPath=n.qcloud.qcloudSsrAccessPath)}}))},handleSelect:function(e){"1"===e?this.$router.push({path:"/admin/site-seo-set"}):"3"===e&&this.$router.push({path:"/admin/site-ssr-explain"})},flipClick:function(e){switch(e){case"qcloud_close":this.$router.push({path:"/admin/tencent-cloud-config/cloud"});break;case"qcloud_server":this.$router.push({path:"/admin/tencent-cloud-config/server"})}},optionBtn:function(){var e=document.getElementById("sharedurl");if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r)}this.$message({message:"内容已复制到剪贴板",type:"success"}),document.execCommand("Copy")}}}},dEJ1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("QbLZ"));n("lpfh");var s=i(n("Uvy3"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)({name:"site-ssr-set"},s.default)},lqbk:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"site-seo"},[t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#fff","text-color":"#333333","active-text-color":"#336699"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("站点地图")]),e._v(" "),t("el-menu-item",{attrs:{index:"2"}},[e._v("静态输出(SSR)")]),e._v(" "),t("el-menu-item",{attrs:{index:"3"}},[e._v("使用说明")])],1),e._v(" "),t("Card",{staticClass:"site-seo-explain"},[t("div",{staticClass:"site-seo-explain__box"},[t("p",{staticClass:"site-seo-explain__box-introduce"},[e._v("\n        由于DISCUZ!Q的技术框架约束，我们无法提供传统的静态文件输出方案，为实现站点的SEO，我们采用了SSR的解决方案；\n      ")]),e._v(" "),t("p",{staticClass:"site-seo-explain__box-introduce"},[e._v("SSR，即Server Side Render(服务端渲染)，服务端将React组件渲染为静态HTML。")]),e._v(" "),t("p",{staticClass:"site-seo-explain__box-introduce"},[e._v("\n        开始之前您首先完成以下设置:\n      ")]),e._v(" "),t("div",{staticClass:"site-seo-explain__box-btn"},[t("span",{on:{click:function(t){return e.flipClick("qcloud_close")}}},[e._v("云API")]),e._v(" "),t("span",{on:{click:function(t){return e.flipClick("qcloud_server")}}},[e._v("SSR存储")])])])]),e._v(" "),t("Card",[t("div",{staticClass:"site-seo-address"},[t("p",{staticClass:"site-seo-address__nginx"},[e._v("Nginx 配置")]),e._v(" "),t("p",{staticClass:"site-seo-address__describe"},[e._v(" 完成上述的设置后，请将以下配置复制到您站点的Nginx配置中")]),e._v(" "),t("div",{ref:"indexesText",staticClass:"site-seo-address__ssrtext",attrs:{id:"sharedurl"}},[e._v("\n        vhosts.conf nginx配置文件（不建议全量）"),t("br"),e._v("\n        # -----------------全量---------------------- "),t("br"),e._v("\n        server { "),t("br"),e._v("\n             ...原始配置 "),t("br"),e._v(" "),t("br"),e._v("\n              location / { "),t("br"),e._v("\n                    proxy_pass "+e._s(e.configPath)+";  //代理需要变化 "),t("br"),e._v("\n                    proxy_connect_timeout        10; "),t("br"),e._v("\n                    proxy_send_timeout           15; "),t("br"),e._v("\n                    proxy_read_timeout           20; "),t("br"),e._v("\n                    proxy_buffer_size            1M; "),t("br"),e._v("\n                    proxy_buffers                8 1M; "),t("br"),e._v("\n                    proxy_busy_buffers_size      1M; "),t("br"),e._v("\n                    proxy_temp_file_write_size   1M; "),t("br"),e._v("\n              } "),t("br"),e._v("\n        } "),t("br"),e._v(" "),t("br"),e._v("\n        vhosts.conf  nginx配置文件（推荐配置） "),t("br"),e._v("\n        # 爬虫请求头判断 "),t("br"),e._v("\n        map $http_user_agent $ua_device { "),t("br"),e._v("\n            default 'desktop'; "),t("br"),e._v("\n            ~*Baiduspider|Yisouspider|Googlebot|spider|Spider|360Spider|bingbot|Sosospider/i 'bot'; "),t("br"),e._v("\n            ~*(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\\ |maemo|midp|mmp|mobile.+firefox|netfront|opera\\ m(ob|in)i|palm(\\ os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows\\ ce|xda|xiino/i 'mobile'; "),t("br"),e._v("\n            ~*android|ipad|playbook|silk/i 'tablet'; "),t("br"),e._v("\n        } "),t("br"),e._v("\n        # --------------- 爬虫流量--------------- "),t("br"),e._v("\n        server { "),t("br"),e._v("\n              ...原始配置 "),t("br"),e._v(" "),t("br"),e._v("\n              set $dst $uri; "),t("br"),e._v("\n              set $dst2 $uri/; "),t("br"),e._v("\n              set $dst3 /index.php?$query_string; "),t("br"),e._v(" "),t("br"),e._v("\n              if ($ua_device = 'bot') { "),t("br"),e._v('\n                set $dst2 ""; '),t("br"),e._v("\n                set $dst3 @proxypass; "),t("br"),e._v("\n              } "),t("br"),e._v(" "),t("br"),e._v("\n              location / { "),t("br"),e._v("\n                  try_files $dst $dst2 $dst3; "),t("br"),e._v("\n              } "),t("br"),e._v("\n              location @proxypass { "),t("br"),e._v("\n                  proxy_pass "+e._s(e.configPath)+"; //代理需要变化 "),t("br"),e._v("\n                  proxy_connect_timeout        10; "),t("br"),e._v("\n                  proxy_send_timeout           15; "),t("br"),e._v("\n                  proxy_read_timeout           20; "),t("br"),e._v("\n                   proxy_buffer_size            1M; "),t("br"),e._v("\n                  proxy_buffers                8 1M; "),t("br"),e._v("\n                  proxy_busy_buffers_size      1M; "),t("br"),e._v("\n                  proxy_temp_file_write_size   1M; "),t("br"),e._v("\n              } "),t("br"),e._v("\n        } "),t("br")])])]),e._v(" "),t("Card",{staticClass:"footer-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.optionBtn}},[e._v("复制")])],1)],1)},s=[]}}]);