(window.webpackJsonp=window.webpackJsonp||[]).push([[37,8],{"/V7O":function(e,t,r){"use strict";r.r(t);var s=r("JUM6"),a=r("yDFb");for(var i in a)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(i);var c=r("KHd+"),o=Object(c.a)(a.default,s.a,s.b,!1,null,null,null);t.default=o.exports},"I1+7":function(e,t,r){},Iqqv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(r("QbLZ"));r("I1+7");var a=i(r("zxK7"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.default)({name:"user-permission-view"},a.default)},JUM6:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rol-permission-box"},[t("div",{staticClass:"index-main-con__main-title__class permission__title"},[t("i"),e._v(" "),e._l(e.menuData,(function(r,s){return t("span",{key:s,class:e.activeTab.name===r.name?"is-active":"",on:{click:function(t){e.activeTab=r}}},[e._v(e._s(r.title))])}))],2),e._v(" "),t("Card",{attrs:{header:"pay"===e.groupType?"付费用户组--"+e.activeTab.title:e.$router.history.current.query.name+"--"+e.activeTab.title}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"userOperate"===e.activeTab.name,expression:"activeTab.name === 'userOperate'"}]},["normal"!==e.groupType?t("div",{staticClass:"user-pay"},[t("div",{staticClass:"user-pay__title"},[e._v("\n          付费设置\n        ")]),e._v(" "),t("Card",{staticClass:"user-pay-money"},[t("span",{staticClass:"user-pay-money__left"},[e._v("\n            付费用户组名称\n          ")]),e._v(" "),t("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"200PX"},attrs:{size:"small",maxlength:"10"},on:{input:e.downloadsNumInput},model:{value:e.groupFeeName,callback:function(t){e.groupFeeName=t},expression:"groupFeeName"}})],1),e._v(" "),t("Card",{staticClass:"user-pay-money"},[t("span",{staticClass:"user-pay-money__left"},[e._v("\n            付费金额\n          ")]),e._v(" "),t("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"100PX"},attrs:{type:"number",size:"small"},on:{input:e.downloadsNumInput},model:{value:e.groupPrice,callback:function(t){e.groupPrice=t},expression:"groupPrice"}}),e._v(" "),t("span",[e._v("\n            0.1 ~ 10000之间\n          ")])],1),e._v(" "),t("Card",{staticClass:"user-pay-money"},[t("span",{staticClass:"user-pay-money__left"},[e._v("\n            付费有效期\n          ")]),e._v(" "),t("el-input",{staticClass:"elinput",staticStyle:{height:"36PX",width:"100PX"},attrs:{type:"number",size:"small"},on:{input:e.downloadsNumInput},model:{value:e.groupDays,callback:function(t){e.groupDays=t},expression:"groupDays"}}),e._v("\n          天\n          "),t("span",{staticClass:"user-pay-money__right"},[e._v("\n            1 ~ 10000之间的整数\n          ")])],1),e._v(" "),t("Card",{staticClass:"user-pay-introduce"},[t("p",{staticClass:"user-pay-introduce__left"},[e._v("\n            特权介绍\n          ")]),e._v(" "),t("div",[t("el-input",{staticClass:"user-pay-introduce__center",attrs:{type:"textarea",rows:2,placeholder:"请输入内容",maxlength:"20","show-word-limit":""},model:{value:e.groupDescription,callback:function(t){e.groupDescription=t},expression:"groupDescription"}}),e._v(" "),t("p",{staticClass:"user-pay-introduce__btn"},[e._v("特权介绍将展示在前台卡片，解释该付费用户组包含的权益")])],1)]),e._v(" "),t("Card",{staticClass:"user-pay-introduce"},[t("p",{staticClass:"user-pay-introduce__left"},[e._v("\n            购买须知\n          ")]),e._v(" "),t("div",[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:e.text,maxlength:"300","show-word-limit":""},model:{value:e.groupNotice,callback:function(t){e.groupNotice=t},expression:"groupNotice"}}),e._v(" "),t("p",{staticClass:"user-pay-introduce__btn"},[e._v("购买须知将展示在前台")])],1)]),e._v(" "),t("Card",{staticClass:"user-pay-explain"},[t("p",{staticClass:"user-pay-explain__title"},[e._v("用户组购买规则说明")]),e._v(" "),t("p",{staticClass:"user-pay-explain__content"},[e._v("一个用户同时只能在一个付费用户组内。")]),e._v(" "),t("p",{staticClass:"user-pay-explain__content"},[e._v("当用户在付费用户组有效期内，购买另一付费用户组，则原用户组前一个付费用户组的时效，顺延到第二个付费用户组时效结束之后。")]),e._v(" "),t("p",{staticClass:"user-pay-explain__content"},[e._v("付费站点中，如果用户的站点有效期低于付费用户组有效期，则以付费用户组有效期为准。")])])],1):e._e(),e._v(" "),t("div",{staticClass:"user-operate__title"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}}),e._v(" "),t("p",{staticStyle:{"margin-left":"10PX"}},[e._v(e._s(e.selectText))])],1),e._v(" "),t("div",{staticClass:"user-operate"},[t("div",{staticClass:"user-operate__header"},[t("div",{staticClass:"scope-action"},[e._v("\n              生效范围\n          ")]),e._v(" "),t("Card",{attrs:{header:"内容发布权限"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"允许发布帖子的权限"}},[t("el-checkbox",{attrs:{label:"switch.createThread",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"createThread")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布帖子")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.createThread"),clearable:"",props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"createThread")},"remove-tag":function(t){return e.clearItem(t,"createThread")}},model:{value:e.selectList.createThread,callback:function(t){e.$set(e.selectList,"createThread",t)},expression:"selectList.createThread"}})],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入图片的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertImage",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入图片")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入视频的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertVideo",disabled:e.videoDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入视频")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入语音的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertAudio",disabled:e.videoDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入语音")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入附件的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertAttachment",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入附件")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入付费的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertPay",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入付费")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入悬赏的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertReward",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入悬赏")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入红包的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertRedPacket",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入红包")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入位置的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertPosition",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入位置")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖插入投票的权限"}},[t("el-checkbox",{attrs:{label:"thread.insertVote",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("插入投票")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发帖发布匿名的权限"}},[t("el-checkbox",{attrs:{label:"thread.allowAnonymous",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("允许匿名")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"允许发布私信"}},[t("el-checkbox",{attrs:{label:"dialog.create",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布私信")])],1)],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"允许在内容分类回复主题的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.reply",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.reply")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("回复主题")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.reply"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.reply")},"remove-tag":function(t){return e.clearItem(t,"thread.reply")}},model:{value:e.selectList["thread.reply"],callback:function(t){e.$set(e.selectList,"thread.reply",t)},expression:"selectList['thread.reply']"}})],1)],1),e._v(" "),t("div",{staticClass:"user-operate"},[t("div",{staticClass:"user-operate__header"},[t("div",{staticClass:"scope-action"},[e._v("\n              生效范围\n          ")]),e._v(" "),t("Card",{attrs:{header:"查看权限"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"查看内容分类主题列表的权限"}},[t("el-checkbox",{attrs:{label:"switch.viewThreads",disabled:"1"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"viewThreads")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("查看主题列表")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.viewThreads"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"viewThreads")},"remove-tag":function(t){return e.clearItem(t,"viewThreads")}},model:{value:e.selectList.viewThreads,callback:function(t){e.$set(e.selectList,"viewThreads",t)},expression:"selectList.viewThreads"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"查看内容分类主题详情的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.viewPosts",disabled:"1"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.viewPosts")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("查看主题详情")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.viewPosts"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.viewPosts")},"remove-tag":function(t){return e.clearItem(t,"thread.viewPosts")}},model:{value:e.selectList["thread.viewPosts"],callback:function(t){e.$set(e.selectList,"thread.viewPosts",t)},expression:"selectList['thread.viewPosts']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"免费查看内容分类下的付费帖子"}},[t("el-checkbox",{attrs:{label:"switch.thread.freeViewPosts",disabled:"1"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.freeViewPosts")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("免费查看付费帖子")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.freeViewPosts"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.freeViewPosts")},"remove-tag":function(t){return e.clearItem(t,"thread.freeViewPosts")}},model:{value:e.selectList["thread.freeViewPosts"],callback:function(t){e.$set(e.selectList,"thread.freeViewPosts",t)},expression:"selectList['thread.freeViewPosts']"}})],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"查看帖子内上传的视频"}},[t("el-checkbox",{attrs:{label:"thread.viewVideo",disabled:"1"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("查看视频")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"查看帖子内上传的附件"}},[t("el-checkbox",{attrs:{label:"thread.viewAttachment",disabled:"1"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("查看附件")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"下载帖子内上传的附件"}},[t("el-checkbox",{attrs:{label:"thread.downloadAttachment",disabled:"1"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("下载附件")])],1)],1),e._v(" "),"8"===e.groupId?t("Card",{staticClass:"invita-box"},[t("CardRow",{staticClass:"invita-box-text"},[t("span",[e._v("访问有效期")])]),e._v(" "),t("div",{staticClass:"invita-box-right"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.invitaValue,callback:function(t){e.invitaValue=t},expression:"invitaValue"}},e._l(e.invitaOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n            天\n          ")],1)],1):e._e(),e._v(" "),"8"===e.groupId?t("Card",{staticClass:"invita-box"},[t("CardRow",{staticClass:"invita-box-text"},[t("span",[e._v("访问有限天内发布内容")])]),e._v(" "),t("div",{staticClass:"invita-box-right"},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.limitedDaysValue,callback:function(t){e.limitedDaysValue=t},expression:"limitedDaysValue"}},e._l(e.invitaOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n            天\n          ")],1)],1):e._e()],1),e._v(" "),t("div",{staticClass:"user-operate"},[t("div",{staticClass:"user-operate__header"},[t("div",{staticClass:"scope-action"},[e._v("\n              生效范围\n          ")]),e._v(" "),t("Card",{attrs:{header:"管理权限"}})],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"前台置顶、取消置顶主题的权限"}},[t("el-checkbox",{attrs:{label:"thread.sticky",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("置顶")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"设置海报、取消海报主题的权限"}},[t("el-checkbox",{attrs:{label:"thread.poster",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("海报")])],1)],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"前台精华、取消精华主题的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.essence",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.essence")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("加精")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.essence"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.essence")},"remove-tag":function(t){return e.clearItem(t,"thread.essence")}},model:{value:e.selectList["thread.essence"],callback:function(t){e.$set(e.selectList,"thread.essence",t)},expression:"selectList['thread.essence']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"前台单个主题的编辑权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.edit",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.edit")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("编辑主题")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.edit"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.edit")},"remove-tag":function(t){return e.clearItem(t,"thread.edit")}},model:{value:e.selectList["thread.edit"],callback:function(t){e.$set(e.selectList,"thread.edit",t)},expression:"selectList['thread.edit']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"前台删除单个主题的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.hide",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.hide")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("删除主题")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.hide"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.hide")},"remove-tag":function(t){return e.clearItem(t,"thread.hide")}},model:{value:e.selectList["thread.hide"],callback:function(t){e.$set(e.selectList,"thread.hide",t)},expression:"selectList['thread.hide']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"前台删除单个回复的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.hidePosts",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.hidePosts")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("删除回复")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.hidePosts"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.hidePosts")},"remove-tag":function(t){return e.clearItem(t,"thread.hidePosts")}},model:{value:e.selectList["thread.hidePosts"],callback:function(t){e.$set(e.selectList,"thread.hidePosts",t)},expression:"selectList['thread.hidePosts']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"作者编辑自己的主题的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.editOwnThreadOrPost",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.editOwnThreadOrPost")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("编辑自己的主题")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.editOwnThreadOrPost"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.editOwnThreadOrPost")},"remove-tag":function(t){return e.clearItem(t,"thread.editOwnThreadOrPost")}},model:{value:e.selectList["thread.editOwnThreadOrPost"],callback:function(t){e.$set(e.selectList,"thread.editOwnThreadOrPost",t)},expression:"selectList['thread.editOwnThreadOrPost']"}})],1),e._v(" "),t("Card",{staticClass:"hasSelect"},[t("CardRow",{attrs:{description:"作者删除自己的主题或回复的权限"}},[t("el-checkbox",{attrs:{label:"switch.thread.hideOwnThreadOrPost",disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:function(t){return e.changeChecked(t,"thread.hideOwnThreadOrPost")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("删除自己的主题或回复")])],1),e._v(" "),t("el-cascader",{key:e.keyValue,attrs:{placeholder:"请选择",options:e.categoriesList,disabled:-1===e.checked.indexOf("switch.thread.hideOwnThreadOrPost"),props:{value:"id",label:"name",children:"children",multiple:!0,checkStrictly:!0,expandTrigger:"hover"},"collapse-tags":""},on:{change:function(t){return e.changeCategory(t,"thread.hideOwnThreadOrPost")},"remove-tag":function(t){return e.clearItem(t,"thread.hideOwnThreadOrPost")}},model:{value:e.selectList["thread.hideOwnThreadOrPost"],callback:function(t){e.$set(e.selectList,"thread.hideOwnThreadOrPost",t)},expression:"selectList['thread.hideOwnThreadOrPost']"}})],1)],1),e._v(" "),"pay"!==e.groupType?t("div",{staticClass:"user-operate"},[t("div",{staticClass:"user-operate__header"},[t("Card",{attrs:{header:"插件权限"}})],1),e._v(" "),e._l(e.plugInPermissions,(function(r,s){return t("Card",{key:s},[t("CardRow",{attrs:{description:r.description}},[t("el-checkbox",{attrs:{disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:r.canUsePlugin,callback:function(t){e.$set(r,"canUsePlugin",t)},expression:"item.canUsePlugin"}},[e._v(e._s(r.title))])],1)],1)}))],2):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"security"===e.activeTab.name,expression:"activeTab.name === 'security'"}]},[t("Card",[t("CardRow",{attrs:{description:"启用验证码需先在腾讯云设置中开启验证码服务"}},[t("el-checkbox",{attrs:{label:"createThreadWithCaptcha",disabled:e.captchaDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布内容时启用验证码")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"实名认证后才可发布内容"}},[t("el-checkbox",{attrs:{label:"publishNeedRealName",disabled:e.realNameDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布内容需先实名认证")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"绑定手机后才可发布内容"}},[t("el-checkbox",{attrs:{label:"publishNeedBindPhone",disabled:e.bindPhoneDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布内容需先绑定手机")])],1)],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:"绑定微信后才可发布内容"}},[t("el-checkbox",{attrs:{label:"publishNeedBindWechat",disabled:e.postDisabled||"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("发布内容需先绑定微信")])],1)],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"default"===e.activeTab.name,expression:"activeTab.name === 'default'"}]},[t("Card",[t("CardRow",{attrs:{description:""}},[t("p",{staticStyle:{"margin-left":"24PX"}},[e._v("站点信息")])])],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:""}},[t("p",{staticStyle:{"margin-left":"24PX"}},[e._v("主题点赞")])])],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:""}},[t("p",{staticStyle:{"margin-left":"24PX"}},[e._v("主题收藏")])])],1),e._v(" "),t("Card",[t("CardRow",{attrs:{description:""}},[t("p",{staticStyle:{"margin-left":"24PX"}},[e._v("主题打赏")])])],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"other"===e.activeTab.name,expression:"activeTab.name === 'other'"}]},[t("Card",{attrs:{header:"裂变推广："}},[t("CardRow",{attrs:{description:"允许用户裂变推广以及通过推广注册进来的用户收入是否能分成"}},[t("el-checkbox",{attrs:{disabled:"1"===e.$router.history.current.query.id||"7"===e.$router.history.current.query.id},on:{change:e.handlePromotionChange},model:{value:e.isSubordinate,callback:function(t){e.isSubordinate=t},expression:"isSubordinate"}},[e._v("裂变推广")])],1),e._v(" "),e.isSubordinate?t("CardRow",{staticClass:"proportion-box",attrs:{description:"站点开启付费模式时下线注册并付费加入的分成比例设置，填1表示10%，不填或为0时为不分成"}},[t("div",[t("span",[e._v("提成比例")]),e._v(" "),t("el-input",{attrs:{type:"number"},on:{blur:e.checkNum},model:{value:e.scale,callback:function(t){e.scale=t},expression:"scale"}})],1)]):e._e()],1)],1),e._v(" "),t("Card",{staticClass:"footer-btn",class:"userOperate"===e.activeTab.name?"footer-btn__inner":""},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.submitGroupList}},[e._v("提交")])],1)],1)},a=[]},yDFb:function(e,t,r){"use strict";r.r(t);var s=r("Iqqv"),a=r.n(s);for(var i in s)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return s[e]}))}(i);t.default=a.a},zxK7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=d(r("m1cH")),a=d(r("4d7F")),i=d(r("ODRq")),c=d(r("4gYi")),o=d(r("pNQN"));function d(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{textarea:"",groupId:0,checked:[],videoDisabled:!1,captchaDisabled:!1,realNameDisabled:!1,isSubordinate:!1,scale:0,bindPhoneDisabled:!1,wechatDisabled:!1,appletDisabled:!1,postDisabled:!1,categoriesList:[],pluginUnit:!1,plugInPermissions:[],selectList:{createThread:[],viewThreads:[],"thread.reply":[],"thread.edit":[],"thread.hide":[],"thread.essence":[],"thread.viewPosts":[],"thread.hidePosts":[],"thread.editOwnThreadOrPost":[],"thread.hideOwnThreadOrPost":[],"thread.freeViewPosts":[]},activeTab:{title:"操作权限",name:"userOperate"},menuData:[{title:"操作权限",name:"userOperate"},{title:"安全设置",name:"security"},{title:"其他设置",name:"other"}],value:"",purchasePrice:"",dyedate:"",ispad:"",allowtobuy:"",defaultuser:!1,checkAll:!1,isIndeterminate:!1,selectText:"全选",checkAllPermission:[],temporaryChecked:[],expandItem:["createThread","viewThreads","thread.reply","thread.edit","thread.hide","thread.essence","thread.viewPosts","thread.hidePosts","thread.editOwnThreadOrPost","thread.hideOwnThreadOrPost","thread.freeViewPosts"],mapCategoryId:new i.default,keyValue:0,groupType:"",groupName:"",groupFeeName:"",groupPrice:"",groupDays:"",groupDescription:"",groupNotice:"购买金额将用于升级您所在的用户组。\n如果购买多次同一用户组，有效期将累加。\n如果购买不同用户组，则新购买的用户组权限立即生效，在此之前的用户组有效期将叠加计算。\n付费站点中，如果您的站点有效期低于付费用户组有效期，则以付费用户组有效期为准。",groupFeeList:[],groupDataName:"",groupLevel:"",invitaOptions:[{value:30,label:"30"},{value:3,label:"3"}],invitaValue:"",limitedDaysValue:""}},watch:{checked:function(e){var t=!0;this.checkAllPermission.forEach((function(r){-1!==e.indexOf(r)||(t=!1)})),this.checkAll=!!t},checkAll:function(e){e?(this.isIndeterminate=!1,this.selectText="取消全选"):(this.isIndeterminate=!0,this.selectText="全选")}},methods:{duedata:function(e){this.duedata=e.replace(/[^\d]/g,"")},addprice:function(e){var t=this;setTimeout((function(){t.purchasePrice=e.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,"")}),5)},getData:function(){var e=this;a.default.all([this.getCategories(),this.getGroupResource(),this.getSiteInfo(),this.operateRequest()]).then((function(t){e.handleCategories(t[0]),e.handleGroupResource(t[1]),e.signUpSet(t[2]),e.operateList(t[3])}),(function(e){}))},paymentProcess:function(){var e=this;a.default.all([this.getCategories(),this.getSiteInfo()]).then((function(t){e.handleCategories(t[0]),e.signUpSet(t[1])}),(function(e){}))},handleCategories:function(e){var t=this;if(e.errors)return this.$message.error(e.errors[0].code);this.categoriesList=[{id:"",name:"全局",children:[]}],e.Data.forEach((function(e){t.mapCategoryId.set(parseInt(e.pid),e.parentid);var r={id:e.pid,name:e.name,children:[]};e.children&&e.children.forEach((function(e){t.mapCategoryId.set(e.pid,e.parentid),r.children.push({id:e.pid,name:e.name})})),t.categoriesList.push(r)}))},handleGroupResource:function(e){var t=this;if(0!==e.Code)return this.$message.error(e.Code+" "+e.Message);var r=e.Data;this.ispad=r.isPaid,this.scale=r.scale,this.defaultuser=r.default,this.isSubordinate=r.isSubordinate,this.groupFeeName=r.name,this.groupLevel=r.level,this.groupPrice=r.fee,this.groupDays=r.days,this.groupDescription=r.description,this.groupNotice=r.notice,this.invitaValue=r.timeRange,this.limitedDaysValue=r.contentRange;var s=r.permission||[];this.checked=[],s.forEach((function(e){t.checked.push(e.permission)})),this.setSelectValue(this.checked)},signUpSet:function(e){if(e.errors)return this.$message.error(e.errors[0].code);var t=e.Data,r=e.Data.setSite;this.videoDisabled=!1===t.qcloud.qcloudVod,this.captchaDisabled=!1===t.qcloud.qcloudCaptcha,this.realNameDisabled=!1===t.qcloud.qcloudFaceid,this.bindPhoneDisabled=!1===t.qcloud.qcloudSms,this.wechatDisabled=!1===t.passport.offiaccountOpen,this.appletDisabled=!1===t.passport.miniprogramOpen,this.allowtobuy=r.sitePayGroupClose,this.postDisabled=this.wechatDisabled&&this.appletDisabled},operateList:function(e){var t=this;if(e.errors)return this.$message.error(e.errors[0].code);this.plugInPermissions=[],e.Data.forEach((function(e){t.plugInPermissions.push({appId:e.appId,name:e.name,canUsePlugin:e.authority.canUsePlugin,title:e.authority.title,description:e.description})}))},setSelectValue:function(e){var t=this,r=e,s=this.selectList;r.forEach((function(e,a){if(e.includes("category")){var i=e.indexOf("."),c=e.substring(i+1);if(r.includes(c))return void r.splice(a,1);var o=e.substring(8,i),d=t.mapCategoryId.get(parseInt(o)),n=0===d?[o]:[d,o];s[c]&&s[c].push(n)}else t.expandItem.includes(e)&&s[e].push([""])})),this.selectList=s,this.checked=r},getGroups:function(){var e=this;this.appFetch({url:"groups_list_get_v3",method:"get",data:{}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);var r=t.Data;e.groupFeeList=[],r.forEach((function(t){t.isPaid&&e.groupFeeList.push(t)})),"pay"===e.groupType&&e.groupIncrease(),"isPaid"===e.groupType&&e.getData()}}))},submitGroupList:function(){if("pay"===this.groupType||"isPaid"===this.groupType){if(""===this.groupFeeName)return void this.$message.error("用户组名称不能为空");if(""===this.groupPrice)return void this.$message.error("付费金额不能为空");if(this.groupPrice<.1||this.groupPrice>1e4)return void this.$message.error("付费金额为0.1~10000之间");if(""===this.groupDays)return void this.$message.error("付费有效期不能为空");if(this.groupDays<1||this.groupDays>1e4)return void this.$message.error("付费有效期为1~10000之间的整数");"pay"===this.groupType&&this.getGroups(),"isPaid"===this.groupType&&this.submitClick()}else this.submitClick(),8===Number(this.groupId)&&this.freeExperienceGroup()},groupIncrease:function(){var e=this;this.appFetch({url:"groups_create_post_v3",method:"post",data:{name:this.groupFeeName,type:"groups",default:!1,isDisplay:!1,isPaid:1,fee:this.groupPrice,days:this.groupDays,level:this.groupFeeList.length+1,description:this.groupDescription,notice:this.groupNotice}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);var r=t.Data;e.groupId=r.id,e.groupDataName=r.name,e.submitClick()}}))},submitClick:function(){if(this.checkNum()&&this.checkSelect())if(this.value){if(this.purchasePrice<=0)return void this.$message.error("价格不能为0");if(" "==this.purchasePrice)return void this.$message.error("价格不能为空");if(this.dyedate<=0)return void this.$message.error("到期时间不能为0");if(" "==this.dyedate)return void this.$message.error("到期时间不能为空");this.patchGroupScale()}else this.patchGroupScale()},getSiteInfo:function(){return this.appFetch({url:"forum_get_v3",method:"get"})},getCategories:function(){return this.appFetch({url:"categories_list_get_v3",method:"get"})},getGroupResource:function(){return this.appFetch({url:"permission_get_v3",method:"get",params:{id:this.groupId,include:"permission"}})},operateRequest:function(){return this.appFetch({url:"permissionlist_get",method:"get",data:{groupId:this.groupId}})},patchGroupPermission:function(){var e=this,t=this.checked;this.isSubordinate?-1===t.indexOf("other.canInviteUserScale")&&t.push("other.canInviteUserScale"):t=t.filter((function(e){return"other.canInviteUserScale"!==e}));var r={groupId:this.groupId,permissions:t};this.appFetch({url:"permission_update_v3",method:"post",data:r}).then((function(t){0===t.Code?(e.$message({showClose:!0,message:"提交成功",type:"success"}),e.getData()):e.$message.error(t.Message)})).catch((function(e){}))},patchGroupScale:function(){var e=this,t=[];"pay"===this.groupType?t=[{id:this.groupId,name:this.groupDataName,scale:this.scale,isSubordinate:this.isSubordinate}]:"isPaid"===this.groupType?"other"===this.activeTab.name?t=[{id:this.groupId,name:this.groupFeeName,scale:this.scale,isSubordinate:this.isSubordinate}]:(this.groupFeeList.forEach((function(t){t.default=!1,Number(e.groupId)===t.id&&(t.name=e.groupFeeName,t.fee=e.groupPrice,t.days=Number(e.groupDays),t.description=e.groupDescription,t.notice=e.groupNotice)})),t=this.groupFeeList):t=[{id:this.groupId,name:this.$route.query.name,scale:this.scale,isSubordinate:this.isSubordinate}],this.appFetch({url:"groups_batchupdate_post_v3",method:"post",data:{data:t}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{if(0!==t.Code)return void e.$message.error(t.Message);e.patchGroupPermission(),"pay"!==e.groupType&&e.operatePost()}})).catch((function(e){}))},handlePromotionChange:function(e){this.isSubordinate=e},checkNum:function(){if(!this.scale)return!0;return!!/^([0-9](\.\d)?|10)$/.test(this.scale)||(this.$message({message:"提成比例必须是0~10的整数或者一位小数",type:"error"}),!1)},changeCategory:function(e,t){var r=this,a=e,i=this.checked,c=this.checked.includes(t),o=[],d=[];e.forEach((function(e){if(e.length>1)-1===d.indexOf(e[0])&&(d.push(e[0]),a.push([e[0]]),r.selectList[t]=a.filter((function(e){return""!==e[0]}))),e.map((function(e){o.indexOf(!o.includes(t))&&o.push("category"+e+"."+t)}));else{e[0]&&d.push(e[0]);var s=e[0]?"category"+e[0]+"."+t:t;o.push(s)}})),c?(this.selectList[t]=e.filter((function(e){return""!==e[0]})),o.shift(),i=i.filter((function(e){return e!==t})),i=[].concat((0,s.default)(i),o)):o.includes(t)?(this.selectList[t].splice(1),(i=i.filter((function(e){return!o.includes(e)}))).push(t),this.keyValue=Math.random()):(i=i.filter((function(e){return!(e.includes("category")&&e.includes(t))})),i=[].concat((0,s.default)(i),o)),this.checked=i},clearItem:function(e,t){var r=this.checked,s=e[0]?"category"+e[e.length-1]+"."+t:t;r=r.filter((function(e){return e!==s})),this.selectList[t].shift(),this.checked=r,this.keyValue=Math.random()},changeChecked:function(e,t){if(e)return this.open(),void(-1===this.checked.indexOf("switch.thread.viewPosts")&&this.checked.push("switch.thread.viewPosts"));var r=this.checked,s=this.selectList[t].map((function(e){return e[0]?"category"+e[e.length-1]+"."+t:t}));this.checked=r.filter((function(e){return!s.includes(e)})),this.selectList[t]=[]},checkSelect:function(){return this.checked.includes("switch.createThread")&&0===this.selectList.createThread.length?(this.$message.error("请选择发布帖子权限"),!1):-1!==this.checked.indexOf("switch.thread.reply")&&0===this.selectList["thread.reply"].length?(this.$message.error("请选择回复主题权限"),!1):-1!==this.checked.indexOf("switch.viewThreads")&&0===this.selectList.viewThreads.length?(this.$message.error("请选择查看主题列表权限"),!1):-1!==this.checked.indexOf("switch.thread.viewPosts")&&0===this.selectList["thread.viewPosts"].length?(this.$message.error("请选择查看主题详情权限"),!1):-1!==this.checked.indexOf("switch.thread.freeViewPosts")&&0===this.selectList["thread.freeViewPosts"].length?(this.$message.error("请选择免费查看付费帖子权限"),!1):-1!==this.checked.indexOf("switch.thread.essence")&&0===this.selectList["thread.essence"].length?(this.$message.error("请选择加精权限"),!1):-1!==this.checked.indexOf("switch.thread.edit")&&0===this.selectList["thread.edit"].length?(this.$message.error("请选择编辑主题权限"),!1):-1!==this.checked.indexOf("switch.thread.hide")&&0===this.selectList["thread.hide"].length?(this.$message.error("请选择删除主题权限"),!1):-1!==this.checked.indexOf("switch.thread.hidePosts")&&0===this.selectList["thread.hidePosts"].length?(this.$message.error("请选择删除回复权限"),!1):-1!==this.checked.indexOf("switch.thread.editOwnThreadOrPost")&&0===this.selectList["thread.editOwnThreadOrPost"].length?(this.$message.error("请选择编辑自己的主题或回复权限"),!1):-1===this.checked.indexOf("switch.thread.hideOwnThreadOrPost")||0!==this.selectList["thread.hideOwnThreadOrPost"].length||(this.$message.error("请选择删除自己的主题或回复权限"),!1)},handleCheckAllChange:function(e){var t,r=this;(this.checked=[],this.selectList={createThread:[],viewThreads:[],"thread.reply":[],"thread.edit":[],"thread.hide":[],"thread.essence":[],"thread.viewPosts":[],"thread.hidePosts":[],"thread.editOwnThreadOrPost":[],"thread.hideOwnThreadOrPost":[],"thread.freeViewPosts":[]},e)?(this.checkAllPermission.forEach((function(e){r.checked.push(e)})),(t=this.checked).push.apply(t,(0,s.default)(this.expandItem)),this.checkAll=!0,this.setSelectValue(this.checked)):this.checkAll=!1},operatePost:function(){var e=this,t=[];this.plugInPermissions.forEach((function(e){t.push({appId:e.appId,status:e.canUsePlugin?1:0})})),t.length>0&&this.appFetch({url:"permission_switch_post",method:"post",data:{groupId:this.groupId,permissions:t}}).then((function(t){0!==t.Code&&setTimeout((function(){e.$message.error(t.Message)}),2e3)}))},freeExperienceGroup:function(){var e=this;this.appFetch({url:"groups_batchupdate_post_v3",method:"post",data:{data:[{name:"免费体验",id:8,timeRange:this.invitaValue,contentRange:this.limitedDaysValue}]}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else if(0!==t.Code)return void e.$message.error(t.Message)})).catch((function(e){}))},open:function(){var e=this;this.$alert("编辑权限包含查看权限","提示",{confirmButtonText:"确定",lockScroll:!1,callback:function(t){-1===e.checked.indexOf("switch.thread.viewPosts")&&e.checked.push("switch.thread.viewPosts")}})}},created:function(){this.groupType=this.$route.query.type||"normal",this.groupFeeList=this.$route.query.groupFeeData||[],this.groupId=this.$route.query.id,this.activeTab.title=this.$route.query.title||"操作权限",this.activeTab.name=this.$route.query.names||"userOperate","normal"===this.groupType?this.getData():"isPaid"===this.groupType?this.getGroups():this.paymentProcess(),"7"===this.groupId?this.checkAllPermission=["switch.viewThreads","switch.thread.viewPosts","switch.thread.freeViewPosts"]:this.checkAllPermission=["switch.createThread","thread.insertImage","thread.insertVideo","thread.insertAudio","thread.insertAttachment","thread.insertPay","thread.insertReward","thread.insertRedPacket","thread.insertPosition","thread.insertVote","thread.allowAnonymous","dialog.create","switch.thread.reply","switch.viewThreads","switch.thread.viewPosts","switch.thread.freeViewPosts","thread.viewVideo","thread.viewAttachment","thread.downloadAttachment","thread.sticky","thread.poster","switch.thread.essence","switch.thread.edit","switch.thread.hide","switch.thread.hidePosts","switch.thread.editOwnThreadOrPost","switch.thread.hideOwnThreadOrPost"]},components:{Card:c.default,CardRow:o.default}}}}]);